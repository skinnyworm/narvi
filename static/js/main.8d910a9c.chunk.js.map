{"version":3,"sources":["app/helpers/createDataSet.ts","app/helpers/random.ts","app/helpers/dataset.ts","app/store/fetchAll.ts","app/store/authSlice.ts","app/store/dashboardSlice.ts","app/store/datasourceSlice.ts","app/store/store.ts","app/store/hooks.ts","app/theme.ts","components/layout/avatars/index.ts","components/layout/avatars/male01.png","components/layout/avatars/male02.png","components/layout/avatars/male03.png","components/layout/avatars/male04.png","components/layout/avatars/female01.png","components/layout/avatars/female02.png","components/layout/avatars/female03.png","components/layout/avatars/female04.png","components/layout/avatars/female05.png","components/layout/AppDrawer.tsx","components/layout/AppPage.tsx","app/landing/LandingPage.tsx","app/editor/expression.ts","app/editor/group.ts","components/charts/ReactECharts.tsx","components/charts/ChartPaper.tsx","components/charts/SimpleChart.tsx","components/charts/geoCoordMap.ts","components/charts/BmapChart.tsx","components/charts/RadarChart.tsx","components/charts/ChartCard.tsx","app/dashboard/WidgetCard.tsx","app/dashboard/DashboardPage.tsx","components/Link.tsx","app/editor/Main.tsx","app/editor/drawer/SelectDatasource.tsx","components/expression/helpers.tsx","components/expression/ExpressionEditor.tsx","components/expression/ExpressionField.tsx","app/editor/drawer/ConfigGrouping.tsx","app/editor/drawer/ConfigChart.tsx","app/editor/drawer/EditSteps.tsx","app/editor/drawer/EditorDrawer.tsx","app/editor/viewer/DatasourceView.tsx","app/editor/viewer/OutputView.tsx","app/editor/viewer/ChartView.tsx","app/editor/viewer/Viewer.tsx","app/editor/NewWidgetPage.tsx","app/editor/WidgetPage.tsx","app/NotFound.tsx","app/index.tsx","reportWebVitals.ts","index.tsx"],"names":["createDataSet","id","title","schema","rows","meta","map","field","type","data","range","i","reduce","prev","spec","value","number","min","max","precision","Number","Math","random","toFixed","label","labels","weights","entry","weight","length","findIndex","getIndex","brand","salesPerson","dealer","city","staffKpi","autoSales","example","fetched","createAction","createSlice","name","initialState","loaded","userInfo","reducers","extraReducers","builder","addCase","state","action","payload","reducer","actions","widgets","allDatasources","datasources","store","configureStore","auth","dashboard","datasource","useAppSelector","useSelector","createTheme","palette","error","main","red","A400","avatars","males","females","genAvatar","gender","collection","charCodeAt","menuItems","uri","exact","ListItem","props","to","matched","Boolean","useMatch","path","end","navigate","useNavigate","ListItemButton","href","onClick","disabled","sx","opacity","Typography","variant","align","flex","color","children","AppDrawer","Box","component","Stack","alignItems","my","spacing","Avatar","width","height","bgcolor","src","photoURL","displayName","email","textAlign","Button","px","Divider","List","AppBar","styled","MuiAppBar","shouldForwardProp","prop","indexOf","theme","open","rightDrawerWidth","transition","transitions","create","easing","sharp","duration","leavingScreen","easeOut","enteringScreen","marginRight","Root","display","overflow","backgroundColor","grey","AppPage","rightDrawerOpen","React","useState","drawerOpen","setDrawerOpen","Toolbar","mr","edge","flexGrow","noWrap","ml","Drawer","onClose","anchor","ModalProps","keepMounted","Main","mode","LandingPage","Container","justifyContent","binops","a","b","unops","reduceOps","sum","row","expressions","evaluate","count","expression","node","context","left","right","operator","argument","memo","callee","arguments","parse","jsep","group","output","keys","item","labelExp","resultData","values","getRow","labelState","Object","entries","labelRecords","labelValues","ReactECharts","option","style","settings","loading","size","chartRef","useRef","useEffect","chart","resizeChart","resize","current","init","window","addEventListener","dispose","removeEventListener","getInstanceByDom","setOption","showLoading","hideLoading","ref","grids","small","xs","sm","md","lg","medium","large","ChartPaper","gridProps","Grid","Paper","p","SimpleChart","showLegend","category","seriesData","series","groupResult","paperProps","chartOptions","useMemo","options","names","dataset","dimensions","source","xAxis","yAxis","legend","show","geoCoordMap","海门","鄂尔多斯","招远","舟山","齐齐哈尔","盐城","赤峰","青岛","乳山","金昌","泉州","莱西","日照","胶南","南通","拉萨","云浮","梅州","文登","上海","攀枝花","威海","承德","厦门","汕尾","潮州","丹东","太仓","曲靖","烟台","福州","瓦房店","即墨","抚顺","玉溪","张家口","阳泉","莱州","湖州","汕头","昆山","宁波","湛江","揭阳","荣成","连云港","葫芦岛","常熟","东莞","河源","淮安","泰州","南宁","营口","惠州","江阴","蓬莱","韶关","嘉峪关","广州","延安","太原","清远","中山","昆明","寿光","盘锦","长治","深圳","珠海","宿迁","咸阳","铜川","平度","佛山","海口","江门","章丘","肇庆","大连","临汾","吴江","石嘴山","沈阳","苏州","茂名","嘉兴","长春","胶州","银川","张家港","三门峡","锦州","南昌","柳州","三亚","自贡","吉林","阳江","泸州","西宁","宜宾","呼和浩特","成都","大同","镇江","桂林","张家界","宜兴","北海","西安","金坛","东营","牡丹江","遵义","绍兴","扬州","常州","潍坊","重庆","台州","南京","滨州","贵阳","无锡","本溪","克拉玛依","渭南","马鞍山","宝鸡","焦作","句容","北京","徐州","衡水","包头","绵阳","乌鲁木齐","枣庄","杭州","淄博","鞍山","溧阳","库尔勒","安阳","开封","济南","德阳","温州","九江","邯郸","临安","兰州","沧州","临沂","南充","天津","富阳","泰安","诸暨","郑州","哈尔滨","聊城","芜湖","唐山","平顶山","邢台","德州","济宁","荆州","宜昌","义乌","丽水","洛阳","秦皇岛","株洲","石家庄","莱芜","常德","保定","湘潭","金华","岳阳","长沙","衢州","廊坊","菏泽","合肥","武汉","大庆","colors","BmapChart","tooltip","trigger","bmap","center","zoom","roam","mapStyle","styleJson","featureType","elementType","stylers","visibility","lightness","showLabel","result","geoCoord","itemValue","coordinateSystem","encode","symbolSize","val","showEffectOn","rippleEffect","brushType","formatter","position","itemStyle","shadowBlur","shadowColor","zlevel","RadarChart","indicator","MIN_SAFE_INTEGER","text","radar","radius","axisName","borderRadius","padding","ChartCard","WidgetCard","widget","menuAnchor","setMenuAnchor","find","ds","charts","e","currentTarget","anchorEl","MenuItem","DashboardPage","mt","container","Link","linkProps","preventDefault","target","rel","drawerWidth","SelectDatasource","onChange","border","borderColor","dense","disablePadding","selected","ListItemText","primary","findWithRegex","regex","contentBlock","callback","matchArr","start","getText","exec","index","decorators","strategy","block","contentState","fontWeight","blue","marginLeft","pink","ExpressionEditor","forwardRef","fields","editorProps","mentionPlugin","createMentionPlugin","mentionTrigger","plugins","MentionSuggestions","setOpen","mentions","suggestions","setSuggestions","content","ContentState","createFromText","EditorState","createWithContent","editorState","setEditorState","editorKey","getCurrentContent","getPlainText","onOpenChange","onSearchChange","searchValue","toLowerCase","filteredSuggestions","Array","isArray","filter","suggestion","slice","defaultSuggestionsFilter","onAddMention","InputRoot","lineHeight","boxSizing","cursor","shape","typography","body1","borderWidth","ExpressionField","helperText","fullWidth","margin","required","editor","focused","setFocused","FormControl","InputLabel","className","shrink","focus","clsx","onFocus","onBlur","NotchedOutline","notched","FormHelperText","ConfigGrouping","outputEditorRef","editingOutput","setEditingOutput","groupFields","s","update","$set","subheader","ListSubheader","Fragment","secondaryAction","$splice","handleDeleteOutput","handleEditOutput","secondary","Slide","direction","in","top","bottom","zIndex","onSubmit","outputSpec","undefined","next","$push","EditingForm","editing","setOutput","updateField","TextField","Select","format","chartTypes","simple","createRadarChart","createBmapChart","ConfigChart","rootRef","addMenuAnchor","setAddMenuAnchor","editingIndex","setEditingIndex","chartType","addChart","handleNewChartSpec","ChartForm","chartSpec","labelId","checked","apply","handleApplyOutput","ListItemIcon","Checkbox","tabIndex","disableRipple","EditorSteps","activeStep","setActiveStep","Stepper","orientation","Step","StepLabel","StepContent","EditorDrawer","stepperProps","flexShrink","py","DataGridPaper","DatasourceView","String","columns","gutterBottom","localeText","zhCN","components","MuiDataGrid","defaultProps","OutputView","headerName","ChartView","Viewer","datasourceId","trim","NewWidgetPage","setWidget","Breadcrumbs","underline","WidgetPage","useParams","initialWidget","replace","NotFound","AppRoutes","element","App","salesByModel","salesByCity","dispatch","fetchAll","CssBaseline","ThemeProvider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"yPAOO,SAASA,EAAcC,EAAYC,EAAeC,EAAsBC,GAC7E,MAAO,CACLH,KACAI,KAAM,CACJH,QACAC,OAAQA,EAAOG,KAAY,kBAAsB,CAAEC,MAAxB,EAAGA,MAA4BC,KAA/B,EAAUA,UAEvCC,KAAMC,IAAM,EAAGN,GAAME,KAAa,SAACK,GACjC,OAAOR,EAAOS,QAAgB,SAACC,EAAMC,GACnC,MAAM,GAAN,mBAAWD,GAAX,CAAiBC,EAAKC,MAAMF,OAC3B,QCjBF,IAAMG,EAAS,SAACC,EAAaC,GAAwC,IAA3BC,EAA0B,uDAAN,EACnE,OAAO,kBAAMC,QAAQC,KAAKC,UAAYJ,EAAMD,GAAOA,GAAKM,QAAQJ,MAOrDK,EAAQ,SAACC,GACpB,IAAMC,EAAUD,EAAOb,QACrB,SAACc,EAASC,EAAOhB,GAAjB,4BAA2Be,GAA3B,CAAoCC,EAAMC,QAAUF,EAAQf,EAAI,IAAM,OACtE,IAEIO,EAAMQ,EAAQA,EAAQG,OAAS,GAOrC,OAAO,WACL,OAAOJ,EANQ,WACf,IAAMV,EAAQM,KAAKC,SAAWJ,EAC9B,OAAOQ,EAAQI,WAAU,SAACF,EAAQjB,GAAT,OAAeiB,EAASb,KAInCgB,IAAYP,QChBxBQ,EAAQV,EAAa,CACzB,CACEE,MAAO,eACPI,OAAQ,GAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,KAEV,CACEJ,MAAO,eACPI,OAAQ,MAkENK,EAAcX,EAAa,CAC/B,CACEE,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,GAEV,CACEJ,MAAO,eACPI,OAAQ,GAEV,CACEJ,MAAO,eACPI,OAAQ,OAINM,EAASZ,EAAa,CAC1B,CACEE,MAAO,2BACPI,OAAQ,GAEV,CACEJ,MAAO,uCACPI,OAAQ,GAEV,CACEJ,MAAO,2BACPI,OAAQ,IAEV,CACEJ,MAAO,2BACPI,OAAQ,MAINO,EAAOb,EAAa,CACxB,CACEE,MAAO,eACPI,OAAQ,KAEV,CACEJ,MAAO,eACPI,OAAQ,GAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,2BACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,2BACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,qBACPI,OAAQ,IAEV,CACEJ,MAAO,qBACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,qBACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,qBACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,qBACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,2BACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,qBACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,qBACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,2BACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAGV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,MAAO,eACPI,OAAQ,IAEV,CACEJ,M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","file":"static/js/main.8d910a9c.chunk.js","sourcesContent":["import { Schema, Value, DataSource } from 'app/types';\nimport range from 'lodash/range';\n\nexport type SchemaSpec = Schema & {\n  value: (prev: Value[]) => Value;\n};\n\nexport function createDataSet(id: string, title: string, schema: SchemaSpec[], rows: number): DataSource {\n  return {\n    id,\n    meta: {\n      title,\n      schema: schema.map<Schema>(({ field, type }) => ({ field, type })),\n    },\n    data: range(0, rows).map<Value[]>((i) => {\n      return schema.reduce<Value[]>((prev, spec) => {\n        return [...prev, spec.value(prev)];\n      }, []);\n    }),\n  };\n}\n\nexport function toCsv(ds: DataSource) {\n  const header = ds.meta.schema.map((item) => item.field).join(',');\n  const rows = ds.data.map((row) => row.join(','));\n  return [header, ...rows].join('\\n');\n}\n","export const number = (min: number, max: number, precision: number = 0) => {\n  return () => Number((Math.random() * (max - min) + min).toFixed(precision));\n};\n\nexport type WeightedLabel = {\n  label: string;\n  weight: number;\n};\nexport const label = (labels: WeightedLabel[]) => {\n  const weights = labels.reduce<number[]>(\n    (weights, entry, i) => [...weights, entry.weight + (weights[i - 1] || 0)],\n    []\n  );\n  const max = weights[weights.length - 1];\n\n  const getIndex = () => {\n    const value = Math.random() * max;\n    return weights.findIndex((weight, i) => weight > value);\n  };\n\n  return () => {\n    return labels[getIndex()].label;\n  };\n};\n","import { Value } from 'app/types';\nimport { createDataSet } from './createDataSet';\nimport * as random from './random';\nimport range from 'lodash/range';\n\nconst brand = random.label([\n  {\n    label: '大众',\n    weight: 2,\n  },\n  {\n    label: '领克',\n    weight: 0.3,\n  },\n  {\n    label: '长城',\n    weight: 1.5,\n  },\n  {\n    label: '通用',\n    weight: 0.7,\n  },\n]);\n\nconst brandModel = (prev: Value[]) => {\n  // 品牌\n  switch (prev[3]) {\n    case '大众':\n      return random.label([\n        {\n          label: '新帕萨特',\n          weight: 2,\n        },\n      ])();\n\n    case '领克':\n      return random.label([\n        {\n          label: '领克03',\n          weight: 2,\n        },\n        {\n          label: '领克01',\n          weight: 1,\n        },\n      ])();\n\n    case '长城':\n      return random.label([\n        {\n          label: '哈弗H6',\n          weight: 1,\n        },\n      ])();\n\n    case '通用':\n      return random.label([\n        {\n          label: '君威',\n          weight: 1,\n        },\n      ])();\n\n    default:\n      return '未知车型';\n  }\n};\n\nconst modelSalePrice = (prev: Value[]) => {\n  //\"车型\"\n  switch (prev[4]) {\n    case '新帕萨特':\n      return random.number(180000, 220000)();\n    case '领克03':\n      return random.number(120000, 180000)();\n    case '领克01':\n      return random.number(130000, 160000)();\n    case '哈弗H6':\n      return random.number(80000, 110000)();\n    case '君威':\n      return random.number(110000, 170000)();\n    default:\n      return 100000;\n  }\n};\n\nconst salesPerson = random.label([\n  {\n    label: '章霰',\n    weight: 0.5,\n  },\n  {\n    label: '黎思',\n    weight: 1,\n  },\n  {\n    label: '旺武',\n    weight: 2,\n  },\n  {\n    label: '邹柳',\n    weight: 1.4,\n  },\n]);\n\nconst dealer = random.label([\n  {\n    label: '永达集团',\n    weight: 2,\n  },\n  {\n    label: '浙江物产元通',\n    weight: 2,\n  },\n  {\n    label: '广汇汽车',\n    weight: 0.4,\n  },\n  {\n    label: '中升集团',\n    weight: 0.7,\n  },\n]);\n\nconst city = random.label([\n  {\n    label: '上海',\n    weight: 2.3,\n  },\n  {\n    label: '北京',\n    weight: 2,\n  },\n  {\n    label: '合肥',\n    weight: 0.4,\n  },\n  {\n    label: '武汉',\n    weight: 0.7,\n  },\n  {\n    label: '海门',\n    weight: 0.3,\n  },\n  {\n    label: '鄂尔多斯',\n    weight: 0.2,\n  },\n  {\n    label: '舟山',\n    weight: 0.1,\n  },\n  {\n    label: '齐齐哈尔',\n    weight: 0.3,\n  },\n  {\n    label: '盐城',\n    weight: 0.2,\n  },\n  {\n    label: '泉州',\n    weight: 0.3,\n  },\n  {\n    label: '日照',\n    weight: 0.2,\n  },\n  {\n    label: '南通',\n    weight: 0.3,\n  },\n  {\n    label: '拉萨',\n    weight: 0.2,\n  },\n  {\n    label: '文登',\n    weight: 0.3,\n  },\n\n  {\n    label: '威海',\n    weight: 0.3,\n  },\n  {\n    label: '承德',\n    weight: 0.3,\n  },\n  {\n    label: '厦门',\n    weight: 0.5,\n  },\n  {\n    label: '太仓',\n    weight: 0.3,\n  },\n  {\n    label: '烟台',\n    weight: 0.3,\n  },\n  {\n    label: '福州',\n    weight: 0.3,\n  },\n  {\n    label: '昆山',\n    weight: 0.6,\n  },\n  {\n    label: '宁波',\n    weight: 0.3,\n  },\n  {\n    label: '湛江',\n    weight: 0.3,\n  },\n  {\n    label: '连云港',\n    weight: 0.3,\n  },\n  {\n    label: '葫芦岛',\n    weight: 0.1,\n  },\n  {\n    label: '常熟',\n    weight: 0.3,\n  },\n  {\n    label: '东莞',\n    weight: 0.3,\n  },\n  {\n    label: '江阴',\n    weight: 0.3,\n  },\n  {\n    label: '蓬莱',\n    weight: 0.3,\n  },\n  {\n    label: '韶关',\n    weight: 0.2,\n  },\n  {\n    label: '嘉峪关',\n    weight: 0.1,\n  },\n  {\n    label: '广州',\n    weight: 0.8,\n  },\n  {\n    label: '延安',\n    weight: 0.3,\n  },\n  {\n    label: '太原',\n    weight: 0.3,\n  },\n  {\n    label: '清远',\n    weight: 0.3,\n  },\n  {\n    label: '寿光',\n    weight: 0.3,\n  },\n  {\n    label: '盘锦',\n    weight: 0.3,\n  },\n  {\n    label: '长治',\n    weight: 0.3,\n  },\n  {\n    label: '深圳',\n    weight: 0.7,\n  },\n  {\n    label: '珠海',\n    weight: 0.6,\n  },\n  {\n    label: '佛山',\n    weight: 0.4,\n  },\n  {\n    label: '海口',\n    weight: 0.3,\n  },\n  {\n    label: '江门',\n    weight: 0.3,\n  },\n  {\n    label: '大连',\n    weight: 0.4,\n  },\n  {\n    label: '临汾',\n    weight: 0.1,\n  },\n  {\n    label: '吴江',\n    weight: 0.3,\n  },\n  {\n    label: '石嘴山',\n    weight: 0.1,\n  },\n  {\n    label: '沈阳',\n    weight: 0.3,\n  },\n  {\n    label: '苏州',\n    weight: 0.6,\n  },\n  {\n    label: '茂名',\n    weight: 0.3,\n  },\n  {\n    label: '嘉兴',\n    weight: 0.3,\n  },\n  {\n    label: '长春',\n    weight: 0.3,\n  },\n  {\n    label: '胶州',\n    weight: 0.3,\n  },\n  {\n    label: '银川',\n    weight: 0.3,\n  },\n  {\n    label: '张家港',\n    weight: 0.3,\n  },\n  {\n    label: '锦州',\n    weight: 0.3,\n  },\n  {\n    label: '三亚',\n    weight: 0.3,\n  },\n  {\n    label: '泸州',\n    weight: 0.3,\n  },\n  {\n    label: '西宁',\n    weight: 0.3,\n  },\n  {\n    label: '呼和浩特',\n    weight: 0.3,\n  },\n  {\n    label: '成都',\n    weight: 0.3,\n  },\n  {\n    label: '大同',\n    weight: 0.3,\n  },\n  {\n    label: '镇江',\n    weight: 0.3,\n  },\n  {\n    label: '桂林',\n    weight: 0.2,\n  },\n  {\n    label: '张家界',\n    weight: 0.1,\n  },\n  {\n    label: '宜兴',\n    weight: 0.3,\n  },\n  {\n    label: '西安',\n    weight: 0.3,\n  },\n  {\n    label: '牡丹江',\n    weight: 0.3,\n  },\n  {\n    label: '遵义',\n    weight: 0.3,\n  },\n  {\n    label: '绍兴',\n    weight: 0.3,\n  },\n  {\n    label: '扬州',\n    weight: 0.3,\n  },\n  {\n    label: '常州',\n    weight: 0.3,\n  },\n\n  {\n    label: '重庆',\n    weight: 0.5,\n  },\n  {\n    label: '台州',\n    weight: 0.3,\n  },\n  {\n    label: '南京',\n    weight: 0.4,\n  },\n\n  {\n    label: '贵阳',\n    weight: 0.3,\n  },\n  {\n    label: '无锡',\n    weight: 0.3,\n  },\n  {\n    label: '徐州',\n    weight: 0.3,\n  },\n\n  {\n    label: '包头',\n    weight: 0.3,\n  },\n\n  {\n    label: '乌鲁木齐',\n    weight: 0.5,\n  },\n\n  {\n    label: '杭州',\n    weight: 0.7,\n  },\n\n  {\n    label: '溧阳',\n    weight: 0.3,\n  },\n  {\n    label: '安阳',\n    weight: 0.3,\n  },\n  {\n    label: '开封',\n    weight: 0.3,\n  },\n  {\n    label: '济南',\n    weight: 0.3,\n  },\n\n  {\n    label: '温州',\n    weight: 0.3,\n  },\n\n  {\n    label: '邯郸',\n    weight: 0.3,\n  },\n  {\n    label: '临安',\n    weight: 0.3,\n  },\n  {\n    label: '兰州',\n    weight: 0.3,\n  },\n\n  {\n    label: '南充',\n    weight: 0.3,\n  },\n  {\n    label: '天津',\n    weight: 0.3,\n  },\n  {\n    label: '富阳',\n    weight: 0.3,\n  },\n  {\n    label: '泰安',\n    weight: 0.3,\n  },\n  {\n    label: '诸暨',\n    weight: 0.3,\n  },\n  {\n    label: '郑州',\n    weight: 0.3,\n  },\n  {\n    label: '哈尔滨',\n    weight: 0.3,\n  },\n\n  {\n    label: '唐山',\n    weight: 0.3,\n  },\n  {\n    label: '平顶山',\n    weight: 0.3,\n  },\n\n  {\n    label: '德州',\n    weight: 0.3,\n  },\n  {\n    label: '济宁',\n    weight: 0.3,\n  },\n  {\n    label: '荆州',\n    weight: 0.3,\n  },\n  {\n    label: '宜昌',\n    weight: 0.3,\n  },\n  {\n    label: '义乌',\n    weight: 0.3,\n  },\n  {\n    label: '丽水',\n    weight: 0.3,\n  },\n  {\n    label: '洛阳',\n    weight: 0.3,\n  },\n  {\n    label: '秦皇岛',\n    weight: 0.3,\n  },\n  {\n    label: '株洲',\n    weight: 0.3,\n  },\n  {\n    label: '石家庄',\n    weight: 0.3,\n  },\n  {\n    label: '常德',\n    weight: 0.3,\n  },\n  {\n    label: '保定',\n    weight: 0.3,\n  },\n\n  {\n    label: '长沙',\n    weight: 0.3,\n  },\n\n  {\n    label: '大庆',\n    weight: 0.3,\n  },\n]);\n\nexport const staffKpi = createDataSet(\n  'staffKpi',\n  '销售顾问能力模型',\n  [\n    {\n      field: '日期',\n      type: 'string',\n      value: random.label(\n        range(1, 13).map<random.WeightedLabel>((i) => ({\n          label: `2020年${i}月`,\n          weight: 1 - (i % 3) / 5,\n        })),\n      ),\n    },\n    {\n      field: '销售顾问',\n      type: 'string',\n      value: salesPerson,\n    },\n    {\n      field: '城市',\n      type: 'string',\n      value: city,\n    },\n    {\n      field: '经销商',\n      type: 'string',\n      value: dealer,\n    },\n    {\n      field: '电话联系人数',\n      type: 'number',\n      value: random.number(0, 200),\n    },\n    {\n      field: '加微人数',\n      type: 'number',\n      value: random.number(0, 170),\n    },\n    {\n      field: '到店人数',\n      type: 'number',\n      value: random.number(0, 90),\n    },\n    {\n      field: '再次到店人数',\n      type: 'number',\n      value: random.number(0, 50),\n    },\n    {\n      field: '完整客户档案数',\n      type: 'number',\n      value: random.number(0, 10),\n    },\n    {\n      field: '试驾人数',\n      type: 'number',\n      value: random.number(0, 30),\n    },\n    {\n      field: '订单数量',\n      type: 'number',\n      value: random.number(0, 26),\n    },\n    {\n      field: '交付数量',\n      type: 'number',\n      value: random.number(0, 20),\n    },\n    {\n      field: '订单金额',\n      type: 'number',\n      value: random.number(180000, 220000),\n    },\n  ],\n  1000,\n);\n\nexport const autoSales = createDataSet(\n  'autoSales',\n  '销售数据',\n  [\n    {\n      field: '日期',\n      type: 'string',\n      value: random.label(\n        range(1, 13).map<random.WeightedLabel>((i) => ({\n          label: `2020年${i}月`,\n          weight: 1 - (i % 3) / 10,\n        })),\n      ),\n    },\n    {\n      field: '城市',\n      type: 'string',\n      value: city,\n    },\n    {\n      field: '经销商',\n      type: 'string',\n      value: dealer,\n    },\n    {\n      field: '品牌',\n      type: 'string',\n      value: brand,\n    },\n    {\n      field: '车型',\n      type: 'string',\n      value: brandModel,\n    },\n\n    {\n      field: '线上询问次数',\n      type: 'number',\n      value: random.number(0, 20),\n    },\n    {\n      field: '到店访客数',\n      type: 'number',\n      value: random.number(0, 12),\n    },\n    {\n      field: '订单数量',\n      type: 'number',\n      value: random.number(0, 3),\n    },\n    {\n      field: '交付数量',\n      type: 'number',\n      value: random.number(0, 2),\n    },\n    {\n      field: '订单金额',\n      type: 'number',\n      value: modelSalePrice,\n    },\n  ],\n  1000,\n);\n\nexport const example = createDataSet(\n  'example',\n  '示例数据',\n  [\n    {\n      field: 'age',\n      type: 'number',\n      value: random.number(5, 90),\n    },\n    {\n      field: 'city',\n      type: 'string',\n      value: random.label([\n        { label: 'Melbourne', weight: 2 },\n        { label: 'Sydney', weight: 1 },\n      ]),\n    },\n  ],\n  100,\n);\n","import { Store, createAction } from '@reduxjs/toolkit';\nimport { DataSource, Widget } from 'app/types';\nimport { autoSales, staffKpi, example } from 'app/helpers/dataset';\nimport { RootState } from './store';\nimport { UserInfo } from './authSlice';\n\nexport const fetched = createAction<{\n  datasources: DataSource[];\n  widgets: Widget[];\n  userInfo: UserInfo;\n}>('fetched');\n\nexport const fetchAll = (store: Store<RootState>) => {\n  const salesByModel: Widget = {\n    id: 'sales',\n    title: '2021车型销量',\n    datasource: autoSales.id,\n    label: '$车型',\n    output: [\n      {\n        name: '订单量',\n        expression: 'sum($订单数量)',\n      },\n      {\n        name: '销量',\n        expression: 'sum($交付数量)',\n      },\n      {\n        name: '订单完成率',\n        expression: 'sum($交付数量)/sum($订单数量)',\n      },\n      {\n        name: '线上转换率',\n        expression: 'sum($到店访客数)/sum($线上询问次数)',\n      },\n      {\n        name: '购买决策转换率',\n        expression: 'sum($订单数量)/sum($到店访客数)',\n      },\n    ],\n    charts: [\n      {\n        type: 'simple',\n        title: '销量图表',\n        size: 'medium',\n        category: '车型',\n        series: [\n          { name: '销量', type: 'bar' },\n          { name: '订单量', type: 'line' },\n        ],\n      },\n      {\n        type: 'radar',\n        title: '完成率指标',\n        size: 'medium',\n        category: '车型',\n        series: [\n          { name: '订单完成率' },\n          { name: '订单量' },\n          { name: '销量' },\n          { name: '线上转换率' },\n          { name: '购买决策转换率' },\n        ],\n      },\n    ],\n  };\n\n  const salesByCity: Widget = {\n    id: 'salesByCity',\n    title: '区域销量',\n    datasource: autoSales.id,\n    label: '$城市',\n    output: [\n      {\n        name: '销量',\n        expression: 'sum($交付数量)',\n      },\n    ],\n    charts: [\n      {\n        type: 'bmap',\n        title: '城市销量',\n        category: 'city',\n        series: [{ name: '销量', size: 'scaled' }],\n      },\n    ],\n  };\n\n  store.dispatch(\n    fetched({\n      datasources: [autoSales, staffKpi, example],\n      widgets: [salesByModel, salesByCity],\n      userInfo: {\n        displayName: '章叁',\n        email: 'user@example.com',\n      },\n    }),\n  );\n};\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { fetched } from \"./fetchAll\";\n\nexport type UserInfo = {\n  displayName: string;\n  email: string;\n  photoURL?: string;\n};\n\nexport type AuthState = {\n  loaded: boolean;\n  userInfo: UserInfo | null;\n};\n\nexport const initialState: AuthState = {\n  loaded: false,\n  userInfo: null,\n};\n\nconst { actions, reducer } = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetched, (state, action) => {\n      state.loaded = true;\n      state.userInfo = action.payload.userInfo;\n    });\n  },\n});\n\nexport { actions, reducer };\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { Widget } from \"app/types\";\n\nimport { fetched } from \"./fetchAll\";\n\nexport interface DashboardState {\n  widgets: Widget[];\n}\n\nexport const initialState: DashboardState = {\n  widgets: [],\n};\n\nexport const { reducer } = createSlice({\n  name: \"dashboard\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetched, (state, action) => {\n      state.widgets = action.payload.widgets;\n    });\n  },\n});\n","import { createSlice } from \"@reduxjs/toolkit\";\nimport { DataSource } from \"app/types\";\nimport { fetched } from \"./fetchAll\";\n\nexport type DatasourceState = {\n  allDatasources: DataSource[];\n};\n\nexport const initialState: DatasourceState = {\n  allDatasources: [],\n};\n\nexport const { reducer } = createSlice({\n  name: \"datasources\",\n  initialState,\n  reducers: {},\n  extraReducers: (builder) => {\n    builder.addCase(fetched, (state, action) => {\n      state.allDatasources = action.payload.datasources;\n    });\n  },\n});\n","import { configureStore, ThunkAction, Action } from \"@reduxjs/toolkit\";\nimport { reducer as auth } from \"./authSlice\";\nimport { reducer as dashboard } from \"./dashboardSlice\";\nimport { reducer as datasource } from \"./datasourceSlice\";\n\nexport const store = configureStore({\n  reducer: {\n    auth,\n    dashboard,\n    datasource,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\nexport type AppThunk<ReturnType = void> = ThunkAction<\n  ReturnType,\n  RootState,\n  unknown,\n  Action<string>\n>;\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport type { RootState, AppDispatch } from \"./store\";\n\n// Use throughout your app instead of plain `useDispatch` and `useSelector`\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { createTheme } from \"@mui/material\";\nimport { red } from \"@mui/material/colors\";\n\n// A custom theme for this app\nexport default createTheme({\n  palette: {\n    error: {\n      main: red.A400,\n    },\n  },\n});\n","import male01 from \"./male01.png\";\nimport male02 from \"./male02.png\";\nimport male03 from \"./male03.png\";\nimport male04 from \"./male04.png\";\nimport female01 from \"./female01.png\";\nimport female02 from \"./female02.png\";\nimport female03 from \"./female03.png\";\nimport female04 from \"./female04.png\";\nimport female05 from \"./female05.png\";\n\nexport const avatars = {\n  males: [male01, male02, male03, male04],\n  females: [female01, female02, female03, female04, female05],\n};\n\nexport function genAvatar(name: string, gender: string = \"female\") {\n  const collection = gender === \"male\" ? avatars.males : avatars.females;\n  return collection[name.charCodeAt(0) % collection.length];\n}\n","export default __webpack_public_path__ + \"static/media/male01.2f896a99.png\";","export default __webpack_public_path__ + \"static/media/male02.b5383c37.png\";","export default __webpack_public_path__ + \"static/media/male03.7bd4eace.png\";","export default __webpack_public_path__ + \"static/media/male04.8d984ec6.png\";","export default __webpack_public_path__ + \"static/media/female01.4d996702.png\";","export default __webpack_public_path__ + \"static/media/female02.693c7dad.png\";","export default __webpack_public_path__ + \"static/media/female03.da34e445.png\";","export default __webpack_public_path__ + \"static/media/female04.88ab3203.png\";","export default __webpack_public_path__ + \"static/media/female05.a7f81fa6.png\";","import React from 'react';\nimport {\n  Avatar,\n  Box,\n  Button,\n  Divider,\n  List,\n  ListItem as MuiListItem,\n  ListItemButton,\n  Stack,\n  Typography,\n} from '@mui/material';\nimport { useAppSelector } from 'app/store';\nimport { genAvatar } from './avatars';\nimport { useNavigate, useMatch } from 'react-router-dom';\n\nexport const drawerWidth = 300;\n\nconst menuItems: Array<{\n  uri: string;\n  label: string;\n  exact?: boolean;\n}> = [\n  {\n    uri: '/narvi',\n    label: 'Home',\n    exact: true,\n  },\n  {\n    uri: '/narvi/dashboard',\n    label: 'Dashboard',\n  },\n];\n\nconst ListItem = (props: { children: React.ReactNode; exact?: boolean; to: string }) => {\n  const { exact = false, to } = props;\n  const matched = Boolean(useMatch({ path: to, end: Boolean(exact) }));\n  const navigate = useNavigate();\n  return (\n    // @ts-ignore\n    <MuiListItem>\n      <ListItemButton\n        href={to}\n        onClick={() => navigate(to)}\n        disabled={matched}\n        sx={{\n          '&.Mui-disabled': {\n            opacity: 1,\n          },\n        }}>\n        <Typography variant=\"h6\" align=\"center\" sx={{ flex: 1, color: matched ? 'text.primary' : 'text.disabled' }}>\n          {props.children}\n        </Typography>\n      </ListItemButton>\n    </MuiListItem>\n  );\n};\n\nexport function AppDrawer() {\n  const { loaded, userInfo } = useAppSelector((state) => state.auth);\n  const navigate = useNavigate();\n\n  if (!loaded) {\n    return null;\n  }\n\n  return (\n    <Box component=\"nav\">\n      <Stack alignItems=\"center\" my={2} spacing={2}>\n        {userInfo ? (\n          <>\n            <Avatar\n              sx={{ width: 96, height: 96, bgcolor: 'primary.light' }}\n              src={userInfo.photoURL || genAvatar(userInfo.displayName || userInfo.email!)}\n            />\n            <Box sx={{ textAlign: 'center' }}>\n              <Typography variant=\"subtitle1\">{userInfo.displayName}</Typography>\n              <Typography variant=\"body2\" color=\"textSecondary\">\n                {userInfo.email}\n              </Typography>\n            </Box>\n            <Button color=\"secondary\" onClick={() => {}}>\n              Signout\n            </Button>\n          </>\n        ) : (\n          <Button\n            color=\"secondary\"\n            onClick={() => {\n              navigate('/narvi/auth/signin');\n            }}>\n            Signin\n          </Button>\n        )}\n      </Stack>\n      <Stack px={2}>\n        <Divider />\n        <List>\n          {menuItems.map(({ uri, label, exact }) => (\n            <ListItem key={uri} to={uri} exact={exact}>\n              {label}\n            </ListItem>\n          ))}\n        </List>\n      </Stack>\n    </Box>\n  );\n}\n","import React from 'react';\nimport {\n  Box,\n  IconButton,\n  Toolbar,\n  Typography,\n  Drawer,\n  AppBar as MuiAppBar,\n  AppBarProps as MuiAppBarProps,\n  styled,\n} from '@mui/material';\nimport MenuIcon from '@mui/icons-material/Menu';\nimport { AppDrawer, drawerWidth } from './AppDrawer';\n\ntype AppBarProps = MuiAppBarProps & {\n  open?: boolean;\n  rightDrawerWidth: number;\n};\n\nconst AppBar = styled(MuiAppBar, {\n  shouldForwardProp: (prop) => ['open', 'rightDrawerWidth'].indexOf(prop as string) < 0,\n})<AppBarProps>(({ theme, open, rightDrawerWidth }) => ({\n  transition: theme.transitions.create(['margin', 'width'], {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  ...(open && {\n    width: `calc(100% - ${rightDrawerWidth}px)`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginRight: rightDrawerWidth,\n  }),\n}));\n\nconst Root = styled('div')(({ theme }) => ({\n  display: 'flex',\n  height: '100vh',\n  width: '100vw',\n  overflow: 'hidden',\n  backgroundColor: theme.palette.grey[50],\n}));\n\nexport type AppPageProps = {\n  title?: string;\n  actions?: React.ReactNode;\n  children: React.ReactNode;\n  rightDrawerWidth?: number;\n  rightDrawerOpen?: boolean;\n};\n\nexport function AppPage(props: AppPageProps) {\n  const { title, actions, children, rightDrawerWidth = 0, rightDrawerOpen = false } = props;\n  const [drawerOpen, setDrawerOpen] = React.useState<boolean>(false);\n  return (\n    <Root>\n      <AppBar rightDrawerWidth={rightDrawerWidth} open={rightDrawerOpen}>\n        <Toolbar>\n          <IconButton sx={{ mr: 2 }} color=\"inherit\" edge=\"start\" onClick={() => setDrawerOpen(true)}>\n            <MenuIcon />\n          </IconButton>\n          <Typography sx={{ flexGrow: 1 }} variant=\"h6\" noWrap>\n            {title}\n          </Typography>\n          {actions && <Box ml={1}>{actions}</Box>}\n        </Toolbar>\n      </AppBar>\n\n      <Drawer\n        sx={{\n          '& .MuiDrawer-paper': {\n            width: drawerWidth,\n          },\n        }}\n        variant=\"temporary\"\n        open={drawerOpen}\n        onClose={() => setDrawerOpen(false)}\n        anchor=\"left\"\n        ModalProps={{ keepMounted: true }}>\n        <AppDrawer />\n      </Drawer>\n      {children}\n    </Root>\n  );\n}\n\nexport const Main = (props: { children: React.ReactNode }) => (\n  <Box\n    component=\"main\"\n    sx={{\n      flexGrow: 1,\n      overflow: 'auto',\n      backgroundColor: (theme) => (theme.palette.mode === 'light' ? theme.palette.grey[100] : theme.palette.grey[900]),\n    }}>\n    {props.children}\n  </Box>\n);\n","import React from \"react\";\nimport { Container, Box, Typography } from \"@mui/material\";\nimport { AppPage, Main } from \"components/layout\";\n\nexport function LandingPage() {\n  return (\n    <AppPage title=\"Home\">\n      <Main>\n        <Container component=\"article\">\n          <Box\n            sx={{\n              height: \"100vh\",\n              display: \"flex\",\n              justifyContent: \"center\",\n              alignItems: \"center\",\n            }}\n          >\n            <Typography variant=\"h2\">Landing Page</Typography>\n          </Box>\n        </Container>\n      </Main>\n    </AppPage>\n  );\n}\n","import jsep, { Identifier } from 'jsep';\nimport { Value } from 'app/types';\n\nconst binops: Record<string, (a: any, b: any) => any> = {\n  '||': (a: any, b: any) => a || b,\n  '&&': (a: any, b: any) => a && b,\n  '|': (a: number, b: number) => a | b,\n  '^': (a: number, b: number) => a ^ b,\n  '&': (a: number, b: number) => a & b,\n  '==': (a: any, b: any) => a === b,\n  '!=': (a: any, b: any) => a !== b,\n  '===': (a: any, b: any) => a === b,\n  '!==': (a: any, b: any) => a !== b,\n  '<': (a: number, b: number) => a < b,\n  '>': (a: number, b: number) => a > b,\n  '<=': (a: number, b: number) => a <= b,\n  '>=': (a: number, b: number) => a >= b,\n  '<<': (a: number, b: number) => a << b,\n  '>>': (a: number, b: number) => a >> b,\n  '>>>': (a: number, b: number) => a >>> b,\n  '+': (a: any, b: any) => a + b,\n  '-': (a: number, b: number) => a - b,\n  '*': (a: number, b: number) => a * b,\n  '/': (a: number, b: number) => a / b,\n  '%': (a: number, b: number) => a % b,\n};\n\nconst unops: Record<string, (a: any) => any> = {\n  '-': (a: any) => -a,\n  '+': (a: any) => +a,\n  '~': (a: any) => ~a,\n  '!': (a: any) => !a,\n};\n\nconst reduceOps: Record<string, (state: any, row: Record<string, Value>, expressions: AnyExpression[]) => any> = {\n  sum: (state, row, expressions) => state + evaluate(expressions[0], row),\n  count: (state, row, expression) => state + 1,\n};\n\ntype StatefulCallExpression = jsep.CallExpression & {\n  state?: number;\n};\n\nexport type AnyExpression =\n  | jsep.BinaryExpression\n  | jsep.Identifier\n  | jsep.Literal\n  | jsep.UnaryExpression\n  | StatefulCallExpression;\n\nexport function evaluate(node: AnyExpression, context: Record<string, any>): any {\n  switch (node.type) {\n    case 'BinaryExpression':\n      const { left, right, operator } = node;\n      return binops[operator](evaluate(left as AnyExpression, context), evaluate(right as AnyExpression, context));\n\n    case 'Identifier':\n      return context[node.name];\n\n    case 'Literal':\n      return node.value;\n\n    case 'UnaryExpression':\n      return unops[node.operator](evaluate(node.argument as AnyExpression, context));\n\n    case 'CallExpression': {\n      return node.state;\n    }\n\n    default:\n      return undefined;\n  }\n}\n\nexport function reduce(memo: AnyExpression, row: Record<string, Value>): AnyExpression {\n  switch (memo.type) {\n    case 'BinaryExpression': {\n      return {\n        ...memo,\n        left: reduce(memo.left as AnyExpression, row),\n        right: reduce(memo.right as AnyExpression, row),\n      };\n    }\n\n    case 'UnaryExpression': {\n      return {\n        ...memo,\n        argument: reduce(memo.argument as AnyExpression, row),\n      };\n    }\n\n    case 'CallExpression': {\n      const { name } = memo.callee as Identifier;\n      const state = memo.state || 0;\n      return {\n        ...memo,\n        state: reduceOps[name](state, row, memo.arguments as AnyExpression[]),\n      };\n    }\n\n    default: {\n      return memo;\n    }\n  }\n}\n\nexport function parse(expression: string): AnyExpression {\n  return jsep(expression) as AnyExpression;\n}\n","import { DataSource, LabelSpec, OutputSpec, Value } from \"app/types\";\nimport { AnyExpression, evaluate, parse, reduce } from \"./expression\";\n\ntype LabelState = Record<string, AnyExpression>;\n\nexport type LabelOutput = Record<string, any>;\n\nexport type GroupResult = Record<string, LabelOutput>;\n\nexport function group(\n  datasource: DataSource,\n  label: LabelSpec,\n  output: OutputSpec[]\n): GroupResult {\n  const { data, meta } = datasource;\n  const keys = meta.schema.map((item) => `$${item.field}`);\n  const labelExp = parse(label);\n\n  const getRow = (values: Value[]) =>\n    values.reduce<Record<string, Value>>(\n      (row, value, i) => ({ ...row, [keys[i]]: value }),\n      {}\n    );\n\n  const getInitialLabelState = () => {\n    return output.reduce<LabelState>(\n      (labelState, { name, expression }) => ({\n        ...labelState,\n        [name]: parse(expression),\n      }),\n      {}\n    );\n  };\n\n  const state = data.reduce<Record<string, LabelState>>(\n    (resultData, values) => {\n      const row = getRow(values);\n      const label = evaluate(labelExp, row);\n      const labelState = output.reduce<LabelState>((labelState, { name }) => {\n        return { ...labelState, [name]: reduce(labelState[name], row) };\n      }, resultData[label] || getInitialLabelState());\n      return { ...resultData, [label]: labelState };\n    },\n    {}\n  );\n\n  return Object.entries(state).reduce<GroupResult>(\n    (labelRecords, [label, labelState]) => {\n      const labelValues = Object.entries(labelState).reduce<LabelOutput>(\n        (labelValues, [label, expression]) => {\n          return { ...labelValues, [label]: evaluate(expression, {}) };\n        },\n        {}\n      );\n      return { ...labelRecords, [label]: labelValues };\n    },\n    {}\n  );\n}\n","import React from 'react';\nimport { init, getInstanceByDom } from 'echarts';\nimport 'echarts/extension/bmap/bmap';\nimport type { CSSProperties } from 'react';\nimport type { EChartsOption, ECharts, SetOptionOpts } from 'echarts';\nimport { WidgetSize } from './ChartPaper';\n\nexport interface ReactEChartsProps {\n  option: ChartOptions;\n  style?: CSSProperties;\n  settings?: SetOptionOpts;\n  loading?: boolean;\n  theme?: 'light' | 'dark';\n  size?: WidgetSize;\n}\n\nexport type ChartOptions = EChartsOption & { bmap?: any };\n\nexport function ReactECharts({ option, style, settings, loading, theme, size }: ReactEChartsProps): JSX.Element {\n  const chartRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    // Initialize chart\n    let chart: ECharts | undefined;\n    if (chartRef.current !== null) {\n      chart = init(chartRef.current, theme);\n    }\n\n    // Add chart resize listener\n    // ResizeObserver is leading to a bit janky UX\n    function resizeChart() {\n      chart?.resize();\n    }\n    window.addEventListener('resize', resizeChart);\n\n    // Return cleanup function\n    return () => {\n      chart?.dispose();\n      window.removeEventListener('resize', resizeChart);\n    };\n  }, [theme, size]);\n\n  React.useEffect(() => {\n    // Update chart\n    if (chartRef.current !== null) {\n      const chart = getInstanceByDom(chartRef.current);\n      // @ts-ignore\n      chart.setOption(option, settings);\n    }\n  }, [option, settings, theme]); // Whenever theme changes we need to add option and setting due to it being deleted in cleanup function\n\n  React.useEffect(() => {\n    // Update chart\n    if (chartRef.current !== null) {\n      const chart = getInstanceByDom(chartRef.current);\n      // @ts-ignore\n      loading === true ? chart.showLoading() : chart.hideLoading();\n    }\n  }, [loading, theme]);\n\n  return <div ref={chartRef} style={{ width: '100%', height: '100px', ...style }} />;\n}\n","import React from 'react';\nimport { Box, Grid, Paper, Typography } from '@mui/material';\n\nconst grids = {\n  small: {\n    xs: 12,\n    sm: 6,\n    md: 4,\n    lg: 3,\n  },\n  medium: {\n    xs: 12,\n    sm: 12,\n    md: 8,\n    lg: 6,\n  },\n  large: {\n    xs: 12,\n  },\n};\n\nexport type WidgetSize = 'small' | 'medium' | 'large';\n\nexport type ChartPaperProps = {\n  title?: string;\n  size?: WidgetSize;\n  children: React.ReactNode;\n  actions?: React.ReactNode;\n};\n\nexport function ChartPaper({ title, size = 'small', children, actions }: ChartPaperProps) {\n  const gridProps = grids[size];\n\n  return (\n    <Grid item {...gridProps}>\n      <Paper>\n        {title && (\n          <Box p={2} display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n            <Typography>{title}</Typography>\n            {actions}\n          </Box>\n        )}\n        {children}\n      </Paper>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport type { EChartsOption } from 'echarts';\nimport { GroupResult } from 'app/editor/group';\nimport { ReactECharts } from './ReactECharts';\nimport { ChartPaper, ChartPaperProps } from './ChartPaper';\n\ntype ChartType = 'line' | 'bar' | 'scatter';\n\nexport type SimpleChartOptions = Omit<SimpleChartProps, 'groupResult'>;\n\nexport type SimpleChartProps = Omit<ChartPaperProps, 'children'> & {\n  showLegend?: boolean;\n  category: string; // '品牌'\n  series: Array<{ name: string; type?: ChartType }>; // [{name:销量: type:'bar'}],\n  groupResult: GroupResult; // [{\"大众\": {销量: 39}}]\n};\n\nexport function SimpleChart(props: SimpleChartProps) {\n  const { showLegend = true, category, series: seriesData, groupResult, ...paperProps } = props;\n  const chartOptions = React.useMemo<Partial<EChartsOption>>(() => {\n    const { names, series } = seriesData.reduce<{ names: string[]; series: Array<{ type: ChartType }> }>(\n      (options, item) => {\n        return {\n          names: [...options.names, item.name],\n          series: [...options.series, { type: item.type || 'bar' }],\n        };\n      },\n      {\n        names: [],\n        series: [],\n      },\n    );\n    const dataset = {\n      dimensions: [category, ...names],\n      source: Object.entries(groupResult).map(([label, data]) => {\n        return { [category]: label, ...data };\n      }),\n    };\n\n    return { dataset, series };\n  }, [category, seriesData, groupResult]);\n\n  const option: EChartsOption = {\n    ...chartOptions,\n    xAxis: {\n      type: 'category',\n    },\n    yAxis: {},\n    legend: {\n      show: showLegend,\n    },\n  };\n\n  return (\n    <ChartPaper {...paperProps}>\n      <ReactECharts option={option} style={{ height: 300 }} size={props.size} />\n    </ChartPaper>\n  );\n}\n","type Cord = [number, number];\nexport const geoCoordMap: Record<string, Cord> = {\n  海门: [121.15, 31.89],\n  鄂尔多斯: [109.781327, 39.608266],\n  招远: [120.38, 37.35],\n  舟山: [122.207216, 29.985295],\n  齐齐哈尔: [123.97, 47.33],\n  盐城: [120.13, 33.38],\n  赤峰: [118.87, 42.28],\n  青岛: [120.33, 36.07],\n  乳山: [121.52, 36.89],\n  金昌: [102.188043, 38.520089],\n  泉州: [118.58, 24.93],\n  莱西: [120.53, 36.86],\n  日照: [119.46, 35.42],\n  胶南: [119.97, 35.88],\n  南通: [121.05, 32.08],\n  拉萨: [91.11, 29.97],\n  云浮: [112.02, 22.93],\n  梅州: [116.1, 24.55],\n  文登: [122.05, 37.2],\n  上海: [121.48, 31.22],\n  攀枝花: [101.718637, 26.582347],\n  威海: [122.1, 37.5],\n  承德: [117.93, 40.97],\n  厦门: [118.1, 24.46],\n  汕尾: [115.375279, 22.786211],\n  潮州: [116.63, 23.68],\n  丹东: [124.37, 40.13],\n  太仓: [121.1, 31.45],\n  曲靖: [103.79, 25.51],\n  烟台: [121.39, 37.52],\n  福州: [119.3, 26.08],\n  瓦房店: [121.979603, 39.627114],\n  即墨: [120.45, 36.38],\n  抚顺: [123.97, 41.97],\n  玉溪: [102.52, 24.35],\n  张家口: [114.87, 40.82],\n  阳泉: [113.57, 37.85],\n  莱州: [119.942327, 37.177017],\n  湖州: [120.1, 30.86],\n  汕头: [116.69, 23.39],\n  昆山: [120.95, 31.39],\n  宁波: [121.56, 29.86],\n  湛江: [110.359377, 21.270708],\n  揭阳: [116.35, 23.55],\n  荣成: [122.41, 37.16],\n  连云港: [119.16, 34.59],\n  葫芦岛: [120.836932, 40.711052],\n  常熟: [120.74, 31.64],\n  东莞: [113.75, 23.04],\n  河源: [114.68, 23.73],\n  淮安: [119.15, 33.5],\n  泰州: [119.9, 32.49],\n  南宁: [108.33, 22.84],\n  营口: [122.18, 40.65],\n  惠州: [114.4, 23.09],\n  江阴: [120.26, 31.91],\n  蓬莱: [120.75, 37.8],\n  韶关: [113.62, 24.84],\n  嘉峪关: [98.289152, 39.77313],\n  广州: [113.23, 23.16],\n  延安: [109.47, 36.6],\n  太原: [112.53, 37.87],\n  清远: [113.01, 23.7],\n  中山: [113.38, 22.52],\n  昆明: [102.73, 25.04],\n  寿光: [118.73, 36.86],\n  盘锦: [122.070714, 41.119997],\n  长治: [113.08, 36.18],\n  深圳: [114.07, 22.62],\n  珠海: [113.52, 22.3],\n  宿迁: [118.3, 33.96],\n  咸阳: [108.72, 34.36],\n  铜川: [109.11, 35.09],\n  平度: [119.97, 36.77],\n  佛山: [113.11, 23.05],\n  海口: [110.35, 20.02],\n  江门: [113.06, 22.61],\n  章丘: [117.53, 36.72],\n  肇庆: [112.44, 23.05],\n  大连: [121.62, 38.92],\n  临汾: [111.5, 36.08],\n  吴江: [120.63, 31.16],\n  石嘴山: [106.39, 39.04],\n  沈阳: [123.38, 41.8],\n  苏州: [120.62, 31.32],\n  茂名: [110.88, 21.68],\n  嘉兴: [120.76, 30.77],\n  长春: [125.35, 43.88],\n  胶州: [120.03336, 36.264622],\n  银川: [106.27, 38.47],\n  张家港: [120.555821, 31.875428],\n  三门峡: [111.19, 34.76],\n  锦州: [121.15, 41.13],\n  南昌: [115.89, 28.68],\n  柳州: [109.4, 24.33],\n  三亚: [109.511909, 18.252847],\n  自贡: [104.778442, 29.33903],\n  吉林: [126.57, 43.87],\n  阳江: [111.95, 21.85],\n  泸州: [105.39, 28.91],\n  西宁: [101.74, 36.56],\n  宜宾: [104.56, 29.77],\n  呼和浩特: [111.65, 40.82],\n  成都: [104.06, 30.67],\n  大同: [113.3, 40.12],\n  镇江: [119.44, 32.2],\n  桂林: [110.28, 25.29],\n  张家界: [110.479191, 29.117096],\n  宜兴: [119.82, 31.36],\n  北海: [109.12, 21.49],\n  西安: [108.95, 34.27],\n  金坛: [119.56, 31.74],\n  东营: [118.49, 37.46],\n  牡丹江: [129.58, 44.6],\n  遵义: [106.9, 27.7],\n  绍兴: [120.58, 30.01],\n  扬州: [119.42, 32.39],\n  常州: [119.95, 31.79],\n  潍坊: [119.1, 36.62],\n  重庆: [106.54, 29.59],\n  台州: [121.420757, 28.656386],\n  南京: [118.78, 32.04],\n  滨州: [118.03, 37.36],\n  贵阳: [106.71, 26.57],\n  无锡: [120.29, 31.59],\n  本溪: [123.73, 41.3],\n  克拉玛依: [84.77, 45.59],\n  渭南: [109.5, 34.52],\n  马鞍山: [118.48, 31.56],\n  宝鸡: [107.15, 34.38],\n  焦作: [113.21, 35.24],\n  句容: [119.16, 31.95],\n  北京: [116.46, 39.92],\n  徐州: [117.2, 34.26],\n  衡水: [115.72, 37.72],\n  包头: [110, 40.58],\n  绵阳: [104.73, 31.48],\n  乌鲁木齐: [87.68, 43.77],\n  枣庄: [117.57, 34.86],\n  杭州: [120.19, 30.26],\n  淄博: [118.05, 36.78],\n  鞍山: [122.85, 41.12],\n  溧阳: [119.48, 31.43],\n  库尔勒: [86.06, 41.68],\n  安阳: [114.35, 36.1],\n  开封: [114.35, 34.79],\n  济南: [117, 36.65],\n  德阳: [104.37, 31.13],\n  温州: [120.65, 28.01],\n  九江: [115.97, 29.71],\n  邯郸: [114.47, 36.6],\n  临安: [119.72, 30.23],\n  兰州: [103.73, 36.03],\n  沧州: [116.83, 38.33],\n  临沂: [118.35, 35.05],\n  南充: [106.110698, 30.837793],\n  天津: [117.2, 39.13],\n  富阳: [119.95, 30.07],\n  泰安: [117.13, 36.18],\n  诸暨: [120.23, 29.71],\n  郑州: [113.65, 34.76],\n  哈尔滨: [126.63, 45.75],\n  聊城: [115.97, 36.45],\n  芜湖: [118.38, 31.33],\n  唐山: [118.02, 39.63],\n  平顶山: [113.29, 33.75],\n  邢台: [114.48, 37.05],\n  德州: [116.29, 37.45],\n  济宁: [116.59, 35.38],\n  荆州: [112.239741, 30.335165],\n  宜昌: [111.3, 30.7],\n  义乌: [120.06, 29.32],\n  丽水: [119.92, 28.45],\n  洛阳: [112.44, 34.7],\n  秦皇岛: [119.57, 39.95],\n  株洲: [113.16, 27.83],\n  石家庄: [114.48, 38.03],\n  莱芜: [117.67, 36.19],\n  常德: [111.69, 29.05],\n  保定: [115.48, 38.85],\n  湘潭: [112.91, 27.87],\n  金华: [119.64, 29.12],\n  岳阳: [113.09, 29.37],\n  长沙: [113, 28.21],\n  衢州: [118.88, 28.97],\n  廊坊: [116.7, 39.53],\n  菏泽: [115.480656, 35.23375],\n  合肥: [117.27, 31.86],\n  武汉: [114.31, 30.52],\n  大庆: [125.03, 46.58],\n};\n\nexport const cities = [\n  '海门',\n  '鄂尔多斯',\n  '舟山',\n  '齐齐哈尔',\n  '盐城',\n  '青岛',\n  '泉州',\n  '日照',\n  '胶南',\n  '南通',\n  '拉萨',\n  '文登',\n  '上海',\n  '攀枝花',\n  '威海',\n  '承德',\n  '厦门',\n  '汕尾',\n  '潮州',\n  '丹东',\n  '太仓',\n  '烟台',\n  '福州',\n  '抚顺',\n  '玉溪',\n  '张家口',\n  '莱州',\n  '湖州',\n  '汕头',\n  '昆山',\n  '宁波',\n  '湛江',\n  '连云港',\n  '葫芦岛',\n  '常熟',\n  '东莞',\n  '河源',\n  '淮安',\n  '泰州',\n  '南宁',\n  '营口',\n  '惠州',\n  '江阴',\n  '蓬莱',\n  '韶关',\n  '嘉峪关',\n  '广州',\n  '延安',\n  '太原',\n  '清远',\n  '中山',\n  '昆明',\n  '寿光',\n  '盘锦',\n  '长治',\n  '深圳',\n  '珠海',\n  '宿迁',\n  '咸阳',\n  '铜川',\n  '佛山',\n  '海口',\n  '江门',\n  '章丘',\n  '肇庆',\n  '大连',\n  '临汾',\n  '吴江',\n  '石嘴山',\n  '沈阳',\n  '苏州',\n  '茂名',\n  '嘉兴',\n  '长春',\n  '胶州',\n  '银川',\n  '张家港',\n  '锦州',\n  '南昌',\n  '柳州',\n  '三亚',\n  '自贡',\n  '吉林',\n  '泸州',\n  '西宁',\n  '宜宾',\n  '呼和浩特',\n  '成都',\n  '大同',\n  '镇江',\n  '桂林',\n  '张家界',\n  '宜兴',\n  '北海',\n  '西安',\n  '牡丹江',\n  '遵义',\n  '绍兴',\n  '扬州',\n  '常州',\n  '潍坊',\n  '重庆',\n  '台州',\n  '南京',\n  '滨州',\n  '贵阳',\n  '无锡',\n  '本溪',\n  '马鞍山',\n  '宝鸡',\n  '焦作',\n  '北京',\n  '徐州',\n  '衡水',\n  '包头',\n  '绵阳',\n  '乌鲁木齐',\n  '枣庄',\n  '杭州',\n  '淄博',\n  '鞍山',\n  '溧阳',\n  '安阳',\n  '开封',\n  '济南',\n  '德阳',\n  '温州',\n  '九江',\n  '邯郸',\n  '临安',\n  '兰州',\n  '沧州',\n  '临沂',\n  '南充',\n  '天津',\n  '富阳',\n  '泰安',\n  '诸暨',\n  '郑州',\n  '哈尔滨',\n  '芜湖',\n  '唐山',\n  '平顶山',\n  '邢台',\n  '德州',\n  '济宁',\n  '荆州',\n  '宜昌',\n  '义乌',\n  '丽水',\n  '洛阳',\n  '秦皇岛',\n  '株洲',\n  '石家庄',\n  '常德',\n  '保定',\n  '湘潭',\n  '金华',\n  '岳阳',\n  '长沙',\n  '衢州',\n  '廊坊',\n  '菏泽',\n  '合肥',\n  '武汉',\n  '大庆',\n];\n","import React from 'react';\nimport { ChartPaper, ChartPaperProps } from './ChartPaper';\nimport { GroupResult } from 'app/editor/group';\nimport { ChartOptions, ReactECharts } from './ReactECharts';\nimport { geoCoordMap } from './geoCoordMap';\n\nconst colors = ['#f4e925', '#f37848'];\n\ntype Series = {\n  name: string;\n  showLabel?: boolean;\n  color?: string;\n  size?: 'flat' | 'scaled';\n};\n\nexport type BmapChartOptions = Pick<BmapChartProps, 'title' | 'showLegend' | 'category' | 'series'>;\n\nexport type BmapChartProps = Omit<ChartPaperProps, 'children'> & {\n  showLegend?: boolean;\n  category?: 'city' | 'province';\n  series: Series[];\n  groupResult: GroupResult; // [{\"上海\": {销量: 39}}]\n};\n\nexport function BmapChart(props: BmapChartProps) {\n  const { showLegend = true, category, series: seriesData, groupResult, ...paperProps } = props;\n\n  const series = React.useMemo<ChartOptions['series']>(() => {\n    return seriesData.map(({ name, showLabel = true, color, size = 'flat' }, i) => {\n      let range = [0, 0];\n\n      const data = Object.entries(groupResult).reduce<Array<{ name: string; value: number[] }>>(\n        (result, [city, data]) => {\n          const geoCoord = geoCoordMap[city];\n          const itemValue = data[name];\n          range = [Math.min(range[0], itemValue), Math.max(range[1], itemValue)];\n          return geoCoord ? [...result, { name: city, value: [...geoCoord, itemValue] }] : result;\n        },\n        [],\n      );\n\n      const symbolSize =\n        size === 'flat'\n          ? () => 20\n          : (val: number[]) => {\n              const value = 2 + (35 * val[2]) / (range[1] - range[0]);\n\n              return value;\n            };\n      const seriesColor = color || colors[i % colors.length];\n\n      return {\n        name,\n        type: 'effectScatter',\n        coordinateSystem: 'bmap',\n        data,\n        encode: {\n          value: 2,\n        },\n        symbolSize,\n        showEffectOn: 'emphasis',\n        rippleEffect: {\n          brushType: 'stroke',\n        },\n        label: {\n          formatter: '{b}',\n          position: 'right',\n          show: showLabel,\n        },\n        itemStyle: {\n          color: seriesColor,\n          shadowBlur: 10,\n          shadowColor: '#333',\n        },\n        zlevel: i + 1,\n      };\n    });\n  }, [seriesData, groupResult]);\n\n  const option: ChartOptions = {\n    backgroundColor: 'transparent',\n    legend: {\n      show: showLegend,\n      backgroundColor: 'rgba(255,255,255,.5)',\n    },\n\n    tooltip: {\n      trigger: 'item',\n    },\n\n    bmap: {\n      center: [104.114129, 37.550339],\n      zoom: 4,\n      roam: true,\n      mapStyle: {\n        styleJson: [\n          {\n            featureType: 'water',\n            elementType: 'all',\n            stylers: {\n              color: '#044161',\n            },\n          },\n          {\n            featureType: 'land',\n            elementType: 'all',\n            stylers: {\n              color: '#004981',\n            },\n          },\n          {\n            featureType: 'boundary',\n            elementType: 'geometry',\n            stylers: {\n              color: '#064f85',\n            },\n          },\n          {\n            featureType: 'railway',\n            elementType: 'all',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'highway',\n            elementType: 'geometry',\n            stylers: {\n              color: '#004981',\n            },\n          },\n          {\n            featureType: 'highway',\n            elementType: 'geometry.fill',\n            stylers: {\n              color: '#005b96',\n              lightness: 1,\n            },\n          },\n          {\n            featureType: 'highway',\n            elementType: 'labels',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'arterial',\n            elementType: 'geometry',\n            stylers: {\n              color: '#004981',\n            },\n          },\n          {\n            featureType: 'arterial',\n            elementType: 'geometry.fill',\n            stylers: {\n              color: '#00508b',\n            },\n          },\n          {\n            featureType: 'poi',\n            elementType: 'all',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'green',\n            elementType: 'all',\n            stylers: {\n              color: '#056197',\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'subway',\n            elementType: 'all',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'manmade',\n            elementType: 'all',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'local',\n            elementType: 'all',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'arterial',\n            elementType: 'labels',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n          {\n            featureType: 'boundary',\n            elementType: 'geometry.fill',\n            stylers: {\n              color: '#029fd4',\n            },\n          },\n          {\n            featureType: 'building',\n            elementType: 'all',\n            stylers: {\n              color: '#1a5787',\n            },\n          },\n          {\n            featureType: 'label',\n            elementType: 'all',\n            stylers: {\n              visibility: 'off',\n            },\n          },\n        ],\n      },\n    },\n\n    series,\n  };\n\n  return (\n    <ChartPaper {...paperProps} size=\"large\">\n      <ReactECharts option={option} style={{ height: 500 }} size=\"large\" />\n    </ChartPaper>\n  );\n}\n","import React from 'react';\nimport type { EChartsOption } from 'echarts';\nimport { GroupResult } from 'app/editor/group';\nimport { ReactECharts } from './ReactECharts';\nimport { ChartPaper, ChartPaperProps } from './ChartPaper';\n\nexport type RadarChartOptions = Omit<RadarChartProps, 'groupResult'>;\n\nexport type RadarChartProps = Omit<ChartPaperProps, 'children'> & {\n  showLegend?: boolean;\n  category: string; // '品牌'\n  series: Array<{ name: string }>; // [{name:销量}],\n  groupResult: GroupResult; // [{\"大众\": {销量: 39}}]\n};\n\nexport function RadarChart(props: RadarChartProps) {\n  const { showLegend = true, category, series: seriesData, groupResult, ...paperProps } = props;\n\n  const chartOptions = React.useMemo<Partial<EChartsOption>>(() => {\n    const indicator = seriesData.map<{ text: string; max: number }>((item) => {\n      const max = Object.entries(groupResult).reduce(\n        (max, [label, data]) => Math.max(max, data[item.name]),\n        Number.MIN_SAFE_INTEGER,\n      );\n      return {\n        text: item.name,\n        max: max,\n      };\n    });\n\n    const data = Object.keys(groupResult).map((label) => {\n      const value = seriesData.map<{ name: string; value: number[] }>(({ name }) => groupResult[label][name]);\n      return {\n        value,\n        name: label,\n      };\n    });\n\n    return {\n      series: [\n        {\n          name: category,\n          type: 'radar',\n          data,\n        },\n      ],\n      radar: {\n        indicator,\n        center: ['50%', '60%'],\n        radius: 105,\n        axisName: {\n          color: '#fff',\n          backgroundColor: '#666',\n          borderRadius: 3,\n          padding: [3, 5],\n        },\n      },\n    } as Partial<EChartsOption>;\n  }, [category, seriesData, groupResult]);\n\n  const option: EChartsOption = {\n    legend: {\n      show: showLegend,\n    },\n    ...chartOptions,\n  };\n\n  return (\n    <ChartPaper {...paperProps}>\n      <ReactECharts option={option} style={{ height: 300 }} size={props.size} />\n    </ChartPaper>\n  );\n}\n","import { ChartSpec } from 'app/types';\nimport { GroupResult } from 'app/editor/group';\nimport { SimpleChart } from './SimpleChart';\nimport { BmapChart } from './BmapChart';\nimport { RadarChart } from './RadarChart';\n\nexport const ChartCard = ({\n  actions,\n  spec,\n  groupResult,\n}: {\n  actions?: React.ReactNode;\n  spec: ChartSpec;\n  groupResult: GroupResult;\n}) => {\n  switch (spec.type) {\n    case 'radar':\n      return <RadarChart groupResult={groupResult} actions={actions} {...spec} />;\n\n    case 'bmap':\n      return <BmapChart groupResult={groupResult} actions={actions} {...spec} />;\n\n    default:\n      return <SimpleChart groupResult={groupResult} actions={actions} {...spec} />;\n  }\n};\n","import React from 'react';\nimport { Widget } from 'app/types';\nimport { useAppSelector } from 'app/store';\nimport { group } from 'app/editor/group';\nimport { ChartCard } from 'components/charts';\nimport MoreVertIcon from '@mui/icons-material/MoreVert';\nimport { IconButton, Menu, MenuItem } from '@mui/material';\nimport { useNavigate } from 'react-router';\n\nexport type WidgetCardProps = {\n  widget: Widget;\n};\n\nexport const WidgetCard = (props: WidgetCardProps) => {\n  const { widget } = props;\n  const [menuAnchor, setMenuAnchor] = React.useState<HTMLElement | null>(null);\n  const navigate = useNavigate();\n  const datasource = useAppSelector((state) => {\n    if (widget.datasource) {\n      return state.datasource.allDatasources.find((ds) => ds.id === widget.datasource);\n    }\n  });\n\n  const groupResult = React.useMemo(() => {\n    if (datasource && widget.label && widget.output) {\n      return group(datasource, widget.label, widget.output);\n    }\n  }, [datasource, widget]);\n\n  const handleEdit = () => {\n    setMenuAnchor(null);\n    navigate(`/narvi/dashboard/${widget.id}`);\n  };\n\n  if (!groupResult) {\n    return null;\n  }\n\n  return (\n    <>\n      {(widget.charts || []).map((spec, i) => (\n        <ChartCard\n          key={i}\n          spec={spec}\n          groupResult={groupResult}\n          actions={\n            <>\n              <IconButton onClick={(e) => setMenuAnchor(e.currentTarget)}>\n                <MoreVertIcon />\n              </IconButton>\n              <Menu open={Boolean(menuAnchor)} onClose={() => setMenuAnchor(null)} anchorEl={menuAnchor}>\n                <MenuItem onClick={() => handleEdit()}>Edit</MenuItem>\n              </Menu>\n            </>\n          }\n        />\n      ))}\n    </>\n  );\n};\n","import React from 'react';\nimport { Container, IconButton, Toolbar, Grid, Typography } from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport { AppPage, Main } from 'components/layout';\nimport { useNavigate } from 'react-router';\nimport { WidgetCard } from './WidgetCard';\nimport { useAppSelector } from 'app/store';\nimport { Box } from '@mui/system';\n\nexport function DashboardPage() {\n  const navigate = useNavigate();\n  const widgets = useAppSelector((state) => state.dashboard.widgets);\n\n  return (\n    <AppPage\n      title=\"Dashboard\"\n      actions={\n        <IconButton color=\"inherit\" onClick={() => navigate('new')}>\n          <AddIcon />\n        </IconButton>\n      }>\n      <Main>\n        <Toolbar />\n        <Container component=\"article\">\n          <Grid sx={{ mt: 2 }} container spacing={2}>\n            {widgets.map((widget) => (\n              <WidgetCard key={widget.id} widget={widget} />\n            ))}\n          </Grid>\n        </Container>\n        <Box\n          mt={6}\n          height={200}\n          component=\"footer\"\n          bgcolor=\"#333\"\n          color=\"#FFF\"\n          display=\"flex\"\n          alignItems=\"flex-end\"\n          justifyContent=\"center\"\n          p={4}>\n          <Typography variant=\"body2\" color=\"inherit\">\n            ©2021 Copyright by Skinnyworm\n          </Typography>\n        </Box>\n      </Main>\n    </AppPage>\n  );\n}\n","import React from \"react\";\nimport { Link as MuiLink, LinkProps as MuiLinkProps } from \"@mui/material\";\nimport { useNavigate } from \"react-router\";\n\nexport const Link = (props: MuiLinkProps & { to?: string }) => {\n  const navigate = useNavigate();\n  const { to, ...linkProps } = props;\n  return to ? (\n    <MuiLink\n      {...linkProps}\n      onClick={(e) => {\n        e.preventDefault();\n        navigate(to);\n      }}\n      href={to}\n    />\n  ) : (\n    <MuiLink {...linkProps} target=\"_blank\" rel=\"noopener noreferrer\" />\n  );\n};\n","import { styled } from '@mui/material';\n\nexport const Main = styled('main', {\n  shouldForwardProp: (prop) => ['open', 'drawerWidth'].indexOf(prop as string) < 0,\n})<{\n  open?: boolean;\n  drawerWidth: number;\n}>(({ theme, open, drawerWidth }) => ({\n  flexGrow: 1,\n  padding: theme.spacing(3),\n  overflow: 'auto',\n  transition: theme.transitions.create('margin', {\n    easing: theme.transitions.easing.sharp,\n    duration: theme.transitions.duration.leavingScreen,\n  }),\n  marginRight: -drawerWidth,\n  ...(open && {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n    marginRight: 0,\n  }),\n}));\n","import React from 'react';\nimport { Typography, Box, List, ListItemText, ListItem, ListItemButton } from '@mui/material';\nimport { DataSource } from 'app/types';\n\nexport function SelectDatasource({\n  datasources,\n  value,\n  onChange,\n}: {\n  datasources: DataSource[];\n  value?: string;\n  onChange: (value: string) => void;\n}) {\n  return (\n    <Box>\n      <Typography variant=\"body2\">\n        请从已有的数据源中选择一个进行数据转换。尽管有多种数据转换的方案可供选择，但在本演示中我们仅使用Group策略。\n      </Typography>\n      <Box border={1} mt={2} borderColor=\"#CCC\" borderRadius={1}>\n        <List>\n          {datasources.map((ds) => (\n            <ListItem key={ds.id} dense disablePadding selected={ds.id === value}>\n              <ListItemButton onClick={() => onChange(ds.id)}>\n                <ListItemText primary={ds.meta.title} />\n              </ListItemButton>\n            </ListItem>\n          ))}\n        </List>\n      </Box>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { ContentBlock, ContentState, DraftDecorator } from 'draft-js';\nimport { blue, pink } from '@mui/material/colors';\nimport { MentionData } from '@draft-js-plugins/mention';\n\nconst findWithRegex = (regex: RegExp, contentBlock: ContentBlock, callback: (start: number, end: number) => void) => {\n  const text = contentBlock.getText();\n  let matchArr, start;\n  while ((matchArr = regex.exec(text)) !== null) {\n    start = matchArr.index;\n    callback(start, start + matchArr[0].length);\n  }\n};\n\nexport const decorators: DraftDecorator[] = [\n  {\n    strategy: (block: ContentBlock, callback: (start: number, end: number) => void, contentState: ContentState) => {\n      findWithRegex(/(sum|count)/g, block, callback);\n    },\n    component: ({ children }: { children: React.ReactNode }) => (\n      <span style={{ fontWeight: 'bold', color: blue[400] }}>{children}</span>\n    ),\n  },\n  {\n    strategy: (block: ContentBlock, callback: (start: number, end: number) => void, contentState: ContentState) => {\n      findWithRegex(/\\$[^(\\s|)|()]+/g, block, callback);\n    },\n    component: ({ children }: { children: React.ReactNode }) => (\n      <span\n        style={{\n          padding: 2,\n          backgroundColor: blue[50],\n          borderRadius: 4,\n          marginLeft: 3,\n          marginRight: 3,\n          display: 'inline-block',\n          color: pink[400],\n        }}>\n        {children}\n      </span>\n    ),\n  },\n];\n\n// export const applyMentionEntity(editorState: EditorState){\n//   const contentState = editorState.getCurrentContent();\n//   const blocks = contentState.getBlocksAsArray();\n//   const block =blocks[0]\n//   const text = block.getText();\n//   const selction = SelectionState.createEmpty(block.getKey())\n\n//   const regex = /($\\w)/\n//   let result;\n//   while((result = regex.exect))\n// }\n\nexport const defaultSuggestionsFilter = (\n  searchValue: string,\n  suggestions: MentionData[],\n  trigger?: string,\n): MentionData[] => {\n  const value = searchValue.toLowerCase();\n  const triggerSuggestions: MentionData[] =\n    trigger && !Array.isArray(suggestions) ? suggestions[trigger] : (suggestions as MentionData[]);\n  const filteredSuggestions = triggerSuggestions.filter(\n    (suggestion) => !value || suggestion.name.toLowerCase().indexOf(value) > -1,\n  );\n  const length = filteredSuggestions.length < 8 ? filteredSuggestions.length : 8;\n  return filteredSuggestions.slice(0, length);\n};\n","import React from 'react';\nimport Editor from '@draft-js-plugins/editor';\nimport { EditorState, ContentState, EditorProps } from 'draft-js';\nimport createMentionPlugin, { MentionData } from '@draft-js-plugins/mention';\nimport '@draft-js-plugins/mention/lib/plugin.css';\nimport { decorators, defaultSuggestionsFilter } from './helpers';\n\nexport type ExpressionEditorProps = Pick<EditorProps, 'onFocus' | 'onBlur'> & {\n  fields: string[];\n  value: string;\n  onChange: (value: string) => void;\n};\n\nexport const ExpressionEditor = React.forwardRef<Editor, ExpressionEditorProps>((props, ref) => {\n  const { fields, value, onChange, ...editorProps } = props;\n\n  const { MentionSuggestions, plugins } = React.useMemo(() => {\n    const mentionPlugin = createMentionPlugin({ mentionTrigger: '$' });\n    const { MentionSuggestions } = mentionPlugin;\n    const plugins = [mentionPlugin];\n    return { plugins, MentionSuggestions };\n  }, []);\n\n  const [open, setOpen] = React.useState(false);\n\n  const mentions = React.useMemo(() => {\n    return fields.map((field) => {\n      return {\n        name: `$${field}`,\n      };\n    });\n  }, [fields]);\n\n  const [suggestions, setSuggestions] = React.useState<MentionData[]>(mentions);\n\n  const [editorState, setEditorState] = React.useState<EditorState>(() => {\n    let content = ContentState.createFromText(value);\n    let editorState = EditorState.createWithContent(content);\n    return editorState;\n  });\n\n  const handleChange = (state: EditorState) => {\n    setEditorState(state);\n    // const contentState = state.getCurrentContent();\n    // console.log(convertToRaw(contentState));\n    onChange(state.getCurrentContent().getPlainText());\n  };\n\n  return (\n    <>\n      <Editor\n        editorKey={'editor'}\n        editorState={editorState}\n        onChange={handleChange}\n        ref={ref}\n        plugins={plugins}\n        decorators={decorators}\n        {...editorProps}\n      />\n      <MentionSuggestions\n        open={open}\n        onOpenChange={(open) => setOpen(open)}\n        suggestions={suggestions}\n        onSearchChange={(e) => setSuggestions(defaultSuggestionsFilter(e.value, mentions))}\n        onAddMention={() => {\n          // get the mention object selected\n        }}\n      />\n    </>\n  );\n});\n","import React from 'react';\nimport Editor from '@draft-js-plugins/editor';\nimport { FormControl, FormHelperText, styled, InputLabel, InputLabelProps, FormControlProps } from '@mui/material';\nimport NotchedOutline from '@mui/material/OutlinedInput/NotchedOutline';\nimport clsx from 'clsx';\n\nimport { ExpressionEditor } from './ExpressionEditor';\n\nconst InputRoot = styled('div')(({ theme }) => {\n  const borderColor = theme.palette.mode === 'light' ? 'rgba(0, 0, 0, 0.23)' : 'rgba(255, 255, 255, 0.23)';\n  return {\n    color: theme.palette.text.primary,\n    lineHeight: '1.4375em',\n    // 23px\n    boxSizing: 'border-box',\n    // Prevent padding issue with fullWidth.\n    position: 'relative',\n    cursor: 'text',\n    display: 'inline-flex',\n    alignItems: 'center',\n    borderRadius: theme.shape.borderRadius,\n    padding: '16.5px 14px',\n    ...theme.typography.body1,\n\n    '& > .DraftEditor-root': {\n      flex: 1,\n    },\n\n    [`&:hover .notchedOutline`]: {\n      borderColor: theme.palette.text.primary,\n    },\n    // Reset on touch devices, it doesn't add specificity\n    '@media (hover: none)': {\n      [`&:hover .notchedOutline`]: {\n        borderColor,\n      },\n    },\n    [`&.focused .notchedOutline`]: {\n      borderColor: theme.palette.primary.main,\n      borderWidth: 2,\n    },\n\n    [`&.error .notchedOutline`]: {\n      borderColor: theme.palette.error.main,\n    },\n    [`&.disabled .notchedOutline`]: {\n      borderColor: theme.palette.action.disabled,\n      color: theme.palette.text.disabled,\n      cursor: 'default',\n    },\n  };\n});\n\nexport type ExpressionFieldProps = Pick<InputLabelProps, 'disabled' | 'error'> &\n  Pick<FormControlProps, 'fullWidth' | 'margin' | 'required'> & {\n    fields: string[];\n    label?: string;\n    helperText?: string;\n    value: string;\n    onChange: (value: string) => void;\n  };\n\nexport function ExpressionField(props: ExpressionFieldProps) {\n  const { label, helperText, value, onChange, fullWidth, margin, disabled, error, required, fields = [] } = props;\n\n  const editor = React.useRef<Editor>(null);\n\n  const [focused, setFocused] = React.useState(false);\n\n  return (\n    <FormControl fullWidth={fullWidth} margin={margin} required={required}>\n      {label && (\n        <InputLabel className=\"label\" shrink={true} focused={focused} disabled={disabled} error={error}>\n          {label}\n        </InputLabel>\n      )}\n      <InputRoot onClick={() => editor.current?.focus()} className={clsx({ focused, disabled, error })}>\n        <ExpressionEditor\n          ref={editor}\n          onFocus={() => setFocused(true)}\n          onBlur={() => setFocused(false)}\n          value={value}\n          onChange={onChange}\n          fields={fields}\n        />\n        <NotchedOutline\n          className=\"notchedOutline\"\n          label={required ? `${label} *` : label}\n          notched={Boolean(label)}\n          focused={focused}\n        />\n      </InputRoot>\n      {helperText && <FormHelperText id=\"label-input-helper\">{helperText}</FormHelperText>}\n    </FormControl>\n  );\n}\n","import React, { FormEvent } from 'react';\nimport {\n  Box,\n  List,\n  IconButton,\n  ListItem,\n  ListSubheader,\n  ListItemButton,\n  Typography,\n  Divider,\n  ListItemText,\n  Slide,\n  Paper,\n  Button,\n  TextField,\n  Select,\n  MenuItem,\n  InputLabel,\n  FormControl,\n} from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport DeleteIcon from '@mui/icons-material/Clear';\nimport { OutputSpec, Schema, Widget } from 'app/types';\nimport { ExpressionField } from 'components/expression';\nimport update from 'immutability-helper';\nimport { useAppSelector } from 'app/store';\n\ntype EditingOutput = {\n  index?: number;\n  output: OutputSpec;\n};\n\nexport type ConfigGroupingProps = {\n  value: Partial<Widget>;\n  onChange: (value: Partial<Widget>) => void;\n};\n\nexport const ConfigGrouping = ({ value, onChange }: ConfigGroupingProps) => {\n  const { label = '', output = [] } = value;\n  const outputEditorRef = React.useRef<HTMLElement>(null);\n  const [editingOutput, setEditingOutput] = React.useState<EditingOutput | null>(null);\n  const datasource = useAppSelector((state) => {\n    if (value.datasource) {\n      return state.datasource.allDatasources.find((ds) => ds.id === value.datasource);\n    }\n  });\n\n  const schema = React.useMemo(() => {\n    return datasource?.meta.schema || [];\n  }, [datasource]);\n\n  const groupFields = React.useMemo(() => {\n    return schema.filter((s) => s.type === 'string').map((s) => s.field);\n  }, [schema]);\n\n  const handleNewOutput = () => {\n    setEditingOutput({\n      output: {\n        name: '',\n        expression: '',\n      },\n    });\n  };\n\n  const handleEditOutput = (i: number, output: OutputSpec) => {\n    setEditingOutput({\n      index: i,\n      output: output,\n    });\n  };\n\n  const handleDeleteOutput = (i: number) => {\n    onChange(update(value, { output: { $splice: [[i, 1]] } }));\n  };\n\n  const handleSubmitOutput = (outputSpec: OutputSpec, index?: number) => {\n    setEditingOutput(null);\n    if (index === undefined) {\n      const next = value.output ? value : { ...value, output: [] };\n      onChange(update(next, { output: { $push: [outputSpec] } }));\n    } else {\n      onChange(update(value, { output: { [index]: { $set: outputSpec } } }));\n    }\n  };\n\n  const handleLabelChange = (label: string) => {\n    onChange(update(value, { label: { $set: label } }));\n  };\n\n  return (\n    <Box>\n      <ExpressionField\n        label=\"分组表达式\"\n        value={label || ''}\n        onChange={handleLabelChange}\n        margin=\"normal\"\n        fields={groupFields}\n        fullWidth\n        required\n      />\n      <Box\n        ref={outputEditorRef}\n        sx={{\n          position: 'relative',\n          mt: 2,\n          borderRadius: 1,\n          border: 1,\n          boxSizing: 'border-box',\n          borderColor: 'text.disabled',\n          overflow: 'hidden',\n          height: 400,\n        }}>\n        <Box height=\"100%\" overflow=\"auto\">\n          <List\n            subheader={\n              <ListSubheader\n                component=\"div\"\n                sx={{\n                  bgcolor: '#f0f0f0',\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                }}>\n                <span>输出项表达式</span>\n                <IconButton size=\"small\" onClick={() => handleNewOutput()}>\n                  <AddIcon />\n                </IconButton>\n              </ListSubheader>\n            }>\n            {output.map((item, i) => {\n              return (\n                <React.Fragment key={item.name}>\n                  <ListItem\n                    secondaryAction={\n                      <IconButton\n                        edge=\"end\"\n                        aria-label=\"delete\"\n                        size=\"small\"\n                        color=\"warning\"\n                        onClick={() => handleDeleteOutput(i)}>\n                        <DeleteIcon />\n                      </IconButton>\n                    }\n                    disablePadding>\n                    <ListItemButton onClick={() => handleEditOutput(i, item)}>\n                      <ListItemText primary={item.name} secondary={item.expression} />\n                    </ListItemButton>\n                  </ListItem>\n                  <Divider component=\"li\" />\n                </React.Fragment>\n              );\n            })}\n          </List>\n        </Box>\n\n        <Slide direction=\"up\" in={editingOutput !== null} container={outputEditorRef.current}>\n          <Paper sx={{ position: 'absolute', top: 0, left: 0, bottom: 0, right: 0, zIndex: 10, p: 2 }}>\n            {editingOutput && (\n              <EditingForm\n                value={editingOutput}\n                schema={schema}\n                onSubmit={handleSubmitOutput}\n                onClose={() => setEditingOutput(null)}\n              />\n            )}\n          </Paper>\n        </Slide>\n      </Box>\n    </Box>\n  );\n};\n\nconst EditingForm = ({\n  schema,\n  value,\n  onSubmit,\n  onClose,\n}: {\n  schema: Schema[];\n  value: EditingOutput;\n  onSubmit: (output: OutputSpec, index?: number) => void;\n  onClose: () => void;\n}) => {\n  const { index } = value;\n  const editing = index !== undefined;\n  const [output, setOutput] = React.useState(value.output);\n\n  const fields = React.useMemo(() => {\n    return schema.filter((s) => s.type === 'number').map((s) => s.field);\n  }, [schema]);\n\n  const updateField = (field: string, value: string) => {\n    setOutput({ ...output, [field]: value });\n  };\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    onSubmit(output, index);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <Typography>{value.index !== undefined ? output.name : '创建新的输出项'}</Typography>\n      <TextField\n        name=\"name\"\n        label=\"输出项名称\"\n        variant=\"outlined\"\n        value={output.name}\n        onChange={(e) => updateField('name', e.currentTarget.value)}\n        margin=\"normal\"\n        disabled={editing}\n        fullWidth\n        required\n      />\n      <ExpressionField\n        label=\"表达式\"\n        value={output.expression}\n        fields={fields}\n        onChange={(value) => updateField('expression', value)}\n        margin=\"normal\"\n        fullWidth\n        required\n      />\n      <FormControl margin=\"normal\" fullWidth>\n        <InputLabel id=\"demo-simple-select-label\">输出格式</InputLabel>\n        <Select\n          label=\"输出格式\"\n          value={output.format}\n          onChange={(e) => {\n            updateField('format', e.target.value);\n          }}>\n          <MenuItem value=\"number\">整数</MenuItem>\n          <MenuItem value=\"currency\">货币</MenuItem>\n          <MenuItem value=\"percent\">百分比</MenuItem>\n          <MenuItem>\n            <Typography color=\"textSecondary\">\n              <em>无格式</em>\n            </Typography>\n          </MenuItem>\n        </Select>\n      </FormControl>\n\n      <Box\n        sx={{\n          display: 'flex',\n          justifyContent: 'flex-end',\n          '& > *': {\n            mr: 1,\n          },\n        }}>\n        <Button onClick={onClose}>取消</Button>\n        <Button type=\"submit\" variant=\"contained\">\n          {editing ? '确认修改' : '创建'}\n        </Button>\n      </Box>\n    </form>\n  );\n};\n","import React from 'react';\nimport {\n  Box,\n  Checkbox,\n  Divider,\n  FormControl,\n  IconButton,\n  InputLabel,\n  List,\n  ListItem,\n  ListItemButton,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Menu,\n  MenuItem,\n  Paper,\n  Select,\n  Slide,\n  Stack,\n  TextField,\n  Typography,\n} from '@mui/material';\nimport AddIcon from '@mui/icons-material/Add';\nimport CloseIcon from '@mui/icons-material/Clear';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport { ChartSpec, OutputSpec, Widget } from 'app/types';\nimport update from 'immutability-helper';\nimport { WidgetSize } from 'components/charts/ChartPaper';\n\nexport type ConfigChartProps = {\n  value: Partial<Widget>;\n  onChange: (value: Partial<Widget>) => void;\n};\n\nconst chartTypes: Record<ChartSpec['type'], string> = {\n  simple: '基本图表',\n  radar: '雷达图',\n  bmap: '地图',\n};\n\nconst createSimpleChart = (output: OutputSpec[]): ChartSpec => {\n  return {\n    type: 'simple',\n    title: '基本图表',\n    size: 'medium',\n    showLegend: false,\n    category: 'label',\n    series: output.map((item) => ({\n      name: item.name,\n      type: 'bar',\n    })),\n  };\n};\n\nconst createRadarChart = (output: OutputSpec[]): ChartSpec => {\n  return {\n    type: 'radar',\n    title: '雷达图',\n    size: 'medium',\n    showLegend: false,\n    category: 'label',\n    series: output.map((item) => ({\n      name: item.name,\n    })),\n  };\n};\n\nconst createBmapChart = (output: OutputSpec[]): ChartSpec => {\n  return {\n    type: 'bmap',\n    title: '全国城市地图',\n    showLegend: false,\n    category: 'city',\n    series: output.map((item) => ({\n      name: item.name,\n      showLabel: true,\n      size: 'scaled',\n    })),\n  };\n};\n\nexport function ConfigChart(props: ConfigChartProps) {\n  const { value: widget, onChange } = props;\n  const rootRef = React.useRef<HTMLElement | null>(null);\n  const [addMenuAnchor, setAddMenuAnchor] = React.useState<HTMLElement | null>(null);\n  const [editingIndex, setEditingIndex] = React.useState<number | null>(null);\n\n  const handleNewChartSpec = (type: ChartSpec['type']) => {\n    setAddMenuAnchor(null);\n    const addChart = (widget: Partial<Widget>): Partial<Widget> => {\n      if (!widget.charts) {\n        widget = { ...widget, charts: [] };\n      }\n\n      switch (type) {\n        case 'simple':\n          return update(widget, { charts: { $push: [createSimpleChart(widget.output!)] } });\n        case 'radar':\n          return update(widget, { charts: { $push: [createRadarChart(widget.output!)] } });\n        case 'bmap':\n          return update(widget, { charts: { $push: [createBmapChart(widget.output!)] } });\n      }\n    };\n\n    const next = addChart(widget);\n    setEditingIndex(next.charts!.length - 1);\n    setAddMenuAnchor(null);\n    onChange(next);\n  };\n\n  const handleUpdateChartSpec = (value: ChartSpec) => {\n    onChange(update(widget, { charts: { [editingIndex!]: { $set: value } } }));\n  };\n\n  const handleDeleteChartSpec = (index: number) => {\n    onChange(update(widget, { charts: { $splice: [[index, 1]] } }));\n  };\n\n  const editing = editingIndex !== null && widget.charts ? widget.charts[editingIndex] : null;\n\n  return (\n    <Box\n      ref={rootRef}\n      sx={{\n        position: 'relative',\n        mt: 2,\n        borderRadius: 1,\n        border: 1,\n        boxSizing: 'border-box',\n        borderColor: 'text.disabled',\n        overflow: 'hidden',\n        height: 520,\n      }}>\n      <Box height=\"100%\" overflow=\"auto\">\n        <List\n          subheader={\n            <ListSubheader\n              component=\"div\"\n              sx={{\n                bgcolor: '#f0f0f0',\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n              }}>\n              <span>图表组件</span>\n              <IconButton size=\"small\" onClick={(e) => setAddMenuAnchor(e.currentTarget)}>\n                <AddIcon />\n              </IconButton>\n              <Menu open={Boolean(addMenuAnchor)} anchorEl={addMenuAnchor}>\n                {Object.entries(chartTypes).map(([chartType, name]) => (\n                  <MenuItem key={chartType} onClick={() => handleNewChartSpec(chartType as ChartSpec['type'])}>\n                    {name}\n                  </MenuItem>\n                ))}\n              </Menu>\n            </ListSubheader>\n          }>\n          {(widget.charts || []).map((chart, i) => {\n            return (\n              <React.Fragment key={i}>\n                <ListItem\n                  secondaryAction={\n                    <IconButton edge=\"end\" aria-label=\"delete\" size=\"small\" onClick={() => handleDeleteChartSpec(i)}>\n                      <DeleteIcon />\n                    </IconButton>\n                  }\n                  disablePadding>\n                  <ListItemButton onClick={() => setEditingIndex(i)}>\n                    <ListItemText primary={chart.title} secondary={chart.type} />\n                  </ListItemButton>\n                </ListItem>\n                <Divider component=\"li\" />\n              </React.Fragment>\n            );\n          })}\n        </List>\n      </Box>\n\n      <Slide direction=\"up\" in={editingIndex !== null} container={rootRef.current}>\n        <Paper\n          sx={{ position: 'absolute', top: 0, left: 0, bottom: 0, right: 0, zIndex: 10, p: 2, overflow: 'hidden' }}>\n          {editing && (\n            <ChartForm\n              value={editing}\n              output={widget.output!}\n              onChange={handleUpdateChartSpec}\n              onClose={() => setEditingIndex(null)}\n            />\n          )}\n        </Paper>\n      </Slide>\n    </Box>\n  );\n}\n\nconst ChartForm = ({\n  output,\n  value: chartSpec,\n  onChange,\n  onClose,\n}: {\n  output: OutputSpec[];\n  value: ChartSpec;\n  onChange: (value: ChartSpec) => void;\n  onClose: () => void;\n}) => {\n  const handleApplyOutput = (item: OutputSpec, apply: boolean) => {\n    if (apply) {\n      onChange(update(chartSpec, { series: { $push: [{ name: item.name }] } }));\n    } else {\n      const index = chartSpec.series.findIndex((series) => series.name === item.name);\n      onChange(update(chartSpec, { series: { $splice: [[index, 1]] } }));\n    }\n  };\n\n  return (\n    <Stack>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\n        <Typography>{chartTypes[chartSpec.type]}</Typography>\n        <IconButton onClick={onClose}>\n          <CloseIcon />\n        </IconButton>\n      </Box>\n      <Stack flex={1} overflow=\"hidden\">\n        <TextField\n          label=\"Title\"\n          value={chartSpec.title}\n          margin=\"dense\"\n          size=\"small\"\n          onChange={(e) => onChange(update(chartSpec, { title: { $set: e.currentTarget.value } }))}\n        />\n        {chartSpec.type !== 'bmap' && (\n          <FormControl margin=\"dense\">\n            <InputLabel id=\"chartspec-size\">Size</InputLabel>\n            <Select\n              label=\"Size\"\n              labelId=\"chartspec-size\"\n              value={chartSpec.size}\n              size=\"small\"\n              onChange={(e) => onChange(update(chartSpec, { size: { $set: e.target.value as WidgetSize } }))}>\n              <MenuItem value=\"small\">Small</MenuItem>\n              <MenuItem value=\"medium\">Medium</MenuItem>\n              <MenuItem value=\"large\">Large</MenuItem>\n            </Select>\n          </FormControl>\n        )}\n        <List>\n          {output.map((item) => {\n            const series = chartSpec.series.find((series) => series.name === item.name);\n            const checked = series !== undefined;\n            return (\n              <React.Fragment key={item.name}>\n                <ListItem dense disablePadding>\n                  <ListItemButton onClick={() => handleApplyOutput(item, !checked)}>\n                    <ListItemIcon>\n                      <Checkbox edge=\"start\" checked={checked} tabIndex={-1} disableRipple />\n                    </ListItemIcon>\n                    <ListItemText primary={item.name} />\n                  </ListItemButton>\n                </ListItem>\n                <Divider component=\"li\" />\n              </React.Fragment>\n            );\n          })}\n        </List>\n      </Stack>\n    </Stack>\n  );\n};\n","import React from 'react';\nimport { Box, Stepper, Step, StepLabel, StepContent, Button } from '@mui/material';\nimport { useAppSelector } from 'app/store';\nimport { Widget } from 'app/types';\nimport { SelectDatasource } from './SelectDatasource';\nimport { ConfigGrouping } from './ConfigGrouping';\nimport { ConfigChart } from './ConfigChart';\n\nexport type EditorStepsProps = {\n  widget: Partial<Widget>;\n  onChange: (widget: Partial<Widget>) => void;\n};\n\nexport function EditorSteps(props: EditorStepsProps) {\n  const { widget, onChange } = props;\n  const [activeStep, setActiveStep] = React.useState(0);\n  const datasources = useAppSelector((state) => state.datasource.allDatasources);\n\n  const handleChangeDs = (datasource: string) => {\n    const { id, title } = widget;\n    onChange({ id, title, datasource });\n  };\n\n  return (\n    <Stepper activeStep={activeStep} orientation=\"vertical\">\n      <Step>\n        <StepLabel>选择数据集</StepLabel>\n        <StepContent>\n          <SelectDatasource datasources={datasources} value={widget.datasource} onChange={handleChangeDs} />\n          <Box>\n            <Button onClick={() => setActiveStep(1)}>下一步</Button>\n          </Box>\n        </StepContent>\n      </Step>\n      <Step>\n        <StepLabel>配置数据转换方案</StepLabel>\n        <StepContent>\n          <ConfigGrouping value={widget} onChange={onChange} />\n          <Box>\n            <Button onClick={() => setActiveStep(0)}>返回</Button>\n            <Button onClick={() => setActiveStep(2)}>下一步</Button>\n          </Box>\n        </StepContent>\n      </Step>\n      <Step>\n        <StepLabel>Dashboard组件</StepLabel>\n        <StepContent>\n          <ConfigChart value={widget} onChange={onChange} />\n          <Box>\n            <Button onClick={() => setActiveStep(1)}>返回</Button>\n            <Button onClick={() => setActiveStep(2)}>确定</Button>\n          </Box>\n        </StepContent>\n      </Step>\n    </Stepper>\n  );\n}\n","import React from 'react';\nimport { Typography, Box, Drawer, IconButton, Divider, Toolbar } from '@mui/material';\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\nimport { EditorSteps, EditorStepsProps } from './EditSteps';\n\nexport const drawerWidth = 400;\n\nexport type EditorDrawerProps = EditorStepsProps & {\n  open: boolean;\n  onClose: () => void;\n};\n\nexport const EditorDrawer = (props: EditorDrawerProps) => {\n  const { open, onClose, ...stepperProps } = props;\n  return (\n    <Drawer\n      sx={{\n        width: drawerWidth,\n        flexShrink: 0,\n        '& .MuiDrawer-paper': {\n          width: drawerWidth,\n        },\n      }}\n      variant=\"persistent\"\n      anchor=\"right\"\n      open={open}>\n      <Toolbar\n        sx={{\n          display: 'flex',\n          alignItems: 'center',\n          py: 1,\n          justifyContent: 'flex-start',\n        }}>\n        <IconButton onClick={onClose}>\n          <ChevronLeftIcon />\n        </IconButton>\n        <Typography variant=\"h6\"> Design </Typography>\n      </Toolbar>\n      <Divider />\n      <Box p={2}>\n        <EditorSteps {...stepperProps} />\n        {/* <Button onClick={() => setActiveStep(0)}>Reset</Button> */}\n      </Box>\n    </Drawer>\n  );\n};\n","import React from 'react';\nimport { Paper, Box, Typography, styled } from '@mui/material';\nimport { DataGrid, GridColDef, GridRowsProp, zhCN } from '@mui/x-data-grid';\nimport { DataSource } from 'app/types';\n\nexport const DataGridPaper = styled(Paper)(({ theme }) => {\n  return {\n    display: 'flex',\n    height: 300,\n    '& .MuiDataGrid-footerContainer': {\n      backgroundColor: '#f0f0f0',\n    },\n  };\n});\n\nexport function DatasourceView({ datasource }: { datasource: DataSource }) {\n  const {\n    meta: { schema },\n    data,\n  } = datasource;\n\n  const { rows, columns } = React.useMemo(() => {\n    const rows: GridRowsProp = data.map<Record<string, any>>((row, i) => {\n      return row.reduce((item, value, i) => ({ ...item, [schema[i].field]: value }), { id: String(i) });\n    });\n\n    const columns: GridColDef[] = schema.map((schema) => ({\n      field: schema.field,\n    }));\n\n    return { rows, columns };\n  }, [data, schema]);\n\n  return (\n    <Box component=\"section\" my={2}>\n      <Typography variant=\"h6\" gutterBottom>\n        数据集\n      </Typography>\n      <DataGridPaper>\n        <DataGrid rows={rows} columns={columns} localeText={zhCN.components.MuiDataGrid.defaultProps.localeText} />\n      </DataGridPaper>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { Box, Typography } from '@mui/material';\nimport { DataGrid, GridColDef, GridRowsProp, zhCN } from '@mui/x-data-grid';\nimport type { Widget } from 'app/types';\nimport { GroupResult } from '../group';\nimport { DataGridPaper } from './DatasourceView';\n\ntype RowColumn = {\n  rows: GridRowsProp;\n  columns: GridColDef[];\n};\n\nexport function OutputView({ groupResult, widget }: { groupResult: GroupResult; widget: Widget }) {\n  const { rows, columns } = React.useMemo<RowColumn>(() => {\n    const rows: GridRowsProp = Object.entries(groupResult).map(([label, output], i) => ({\n      id: i,\n      label: label,\n      ...output,\n    }));\n    const columns = widget.output.reduce<GridColDef[]>(\n      (columns, outputSpec) => {\n        return [\n          ...columns,\n          {\n            field: outputSpec.name,\n            width: 150,\n          },\n        ];\n      },\n      [{ field: 'label', headerName: widget.label, width: 150 }],\n    );\n    return { rows, columns };\n  }, [widget, groupResult]);\n\n  return (\n    <Box component=\"section\" my={2}>\n      <Typography variant=\"h6\" gutterBottom>\n        输出结果\n      </Typography>\n      <DataGridPaper>\n        <DataGrid rows={rows} columns={columns} localeText={zhCN.components.MuiDataGrid.defaultProps.localeText} />\n      </DataGridPaper>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { Box, Grid, Typography } from '@mui/material';\nimport { ChartSpec } from 'app/types';\nimport { ChartCard } from 'components/charts';\nimport { GroupResult } from '../group';\n\nexport type ChartViewProps = {\n  charts: ChartSpec[];\n  groupResult: GroupResult;\n};\n\nexport function ChartView(props: ChartViewProps) {\n  const { charts, groupResult } = props;\n\n  return (\n    <Box component=\"section\" my={2}>\n      <Typography variant=\"h6\" gutterBottom>\n        图表组件\n      </Typography>\n      <Grid container spacing={2}>\n        {charts.map((spec, i) => (\n          <ChartCard key={i} spec={spec} groupResult={groupResult} />\n        ))}\n      </Grid>\n    </Box>\n  );\n}\n","import React from 'react';\nimport { ChartSpec, Widget } from 'app/types';\nimport { useAppSelector } from 'app/store';\nimport { DatasourceView } from './DatasourceView';\nimport { group } from '../group';\nimport { OutputView } from './OutputView';\nimport { ChartView } from './ChartView';\n\nexport type ViewerProps = {\n  widget: Partial<Widget>;\n};\n\nexport function Viewer(props: ViewerProps) {\n  const { widget } = props;\n  const { datasource: datasourceId } = widget;\n\n  const datasource = useAppSelector((state) => {\n    if (datasourceId) {\n      return state.datasource.allDatasources.find((ds) => ds.id === datasourceId);\n    }\n  });\n\n  const groupResult = React.useMemo(() => {\n    if (datasource) {\n      if (widget.label && datasource.meta.schema.findIndex((s) => `$${s.field}` === widget.label!.trim()) >= 0)\n        if (widget.output && widget.output.length > 0) {\n          return group(datasource, widget.label, widget.output);\n        }\n    }\n  }, [datasource, widget]);\n\n  const charts: ChartSpec[] | null = widget.charts && widget.charts.length > 0 ? widget.charts : null;\n\n  return (\n    <article>\n      {datasource && <DatasourceView datasource={datasource} />}\n      {groupResult && <OutputView widget={widget as Widget} groupResult={groupResult} />}\n      {groupResult && charts && <ChartView groupResult={groupResult} charts={charts} />}\n    </article>\n  );\n}\n","import React from 'react';\nimport { Container, Typography, IconButton, Toolbar, Breadcrumbs } from '@mui/material';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { Widget } from 'app/types';\nimport { Link } from 'components';\nimport { AppPage } from 'components/layout';\nimport { Main } from './Main';\nimport { EditorDrawer, drawerWidth } from './drawer';\nimport { Viewer } from './viewer/Viewer';\n\nexport function NewWidgetPage() {\n  const [open, setOpen] = React.useState(true);\n  const [widget, setWidget] = React.useState<Partial<Widget>>({\n    charts: [],\n  });\n  const handleWidgetChange = (widget: Partial<Widget>) => setWidget(widget);\n\n  return (\n    <AppPage\n      title=\"New Widget\"\n      rightDrawerWidth={drawerWidth}\n      rightDrawerOpen={open}\n      actions={\n        !open && (\n          <IconButton color=\"inherit\" onClick={() => setOpen(true)}>\n            <EditIcon />\n          </IconButton>\n        )\n      }>\n      <Main drawerWidth={drawerWidth} open={open}>\n        <Container component=\"article\">\n          <Toolbar />\n          <Breadcrumbs aria-label=\"breadcrumb\">\n            <Link underline=\"hover\" color=\"inherit\" to=\"/narvi/dashboard\">\n              Dashboard\n            </Link>\n            <Typography color=\"text.primary\">New Widget</Typography>\n          </Breadcrumbs>\n\n          <Viewer widget={widget} />\n        </Container>\n      </Main>\n      <EditorDrawer widget={widget} onChange={handleWidgetChange} open={open} onClose={() => setOpen(false)} />\n    </AppPage>\n  );\n}\n","import React from 'react';\nimport { Navigate, useParams } from 'react-router';\nimport { Container, Typography, IconButton, Toolbar, Breadcrumbs } from '@mui/material';\nimport EditIcon from '@mui/icons-material/Edit';\nimport { useAppSelector } from 'app/store';\nimport { Link } from 'components';\nimport { AppPage } from 'components/layout';\nimport { Main } from './Main';\nimport { EditorDrawer, drawerWidth } from './drawer/EditorDrawer';\nimport { Widget } from 'app/types';\nimport { Viewer } from './viewer';\n\nexport function WidgetPage() {\n  const [open, setOpen] = React.useState(true);\n  const { id } = useParams<'id'>();\n  const initialWidget = useAppSelector((state) => state.dashboard.widgets.find((item) => item.id === id));\n  const [widget, setWidget] = React.useState<Partial<Widget>>(initialWidget || {});\n\n  if (!initialWidget) {\n    return <Navigate to=\"/404\" replace />;\n  }\n\n  return (\n    <AppPage\n      title={widget.title}\n      rightDrawerWidth={drawerWidth}\n      rightDrawerOpen={open}\n      actions={\n        !open && (\n          <IconButton color=\"inherit\" onClick={() => setOpen(true)}>\n            <EditIcon />\n          </IconButton>\n        )\n      }>\n      <Main drawerWidth={drawerWidth} open={open}>\n        <Container component=\"article\">\n          <Toolbar />\n          <Breadcrumbs aria-label=\"breadcrumb\">\n            <Link underline=\"hover\" color=\"inherit\" to=\"/narvi/dashboard\">\n              Dashboard\n            </Link>\n            <Typography color=\"text.primary\">{widget.title}</Typography>\n          </Breadcrumbs>\n          <Viewer widget={widget} />\n        </Container>\n      </Main>\n      <EditorDrawer widget={widget} onChange={setWidget} open={open} onClose={() => setOpen(false)} />\n    </AppPage>\n  );\n}\n","import React from \"react\";\nimport { Typography, Box } from \"@mui/material\";\n\nexport const NotFound = () => {\n  return (\n    <Box\n      width=\"100vw\"\n      height=\"100vh\"\n      display=\"flex\"\n      justifyContent=\"center\"\n      alignItems=\"center\"\n    >\n      <Typography variant=\"h2\">OOPS... page not found!</Typography>\n    </Box>\n  );\n};\n","import React from 'react';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter, Routes, Route } from 'react-router-dom';\nimport { CssBaseline, ThemeProvider } from '@mui/material';\nimport { store, useAppSelector, fetchAll } from 'app/store';\nimport theme from './theme';\nimport { LandingPage } from './landing';\nimport { DashboardPage } from './dashboard';\nimport { WidgetPage, NewWidgetPage } from './editor';\nimport { NotFound } from './NotFound';\n\nconst AppRoutes = () => {\n  const auth = useAppSelector((state) => state.auth);\n  if (!auth.loaded) {\n    return null;\n  }\n  return (\n    <Routes>\n      <Route path=\"/narvi\" element={<LandingPage />} />\n      <Route path=\"/narvi/404\" element={<NotFound />} />\n      <Route path=\"/narvi/dashboard\">\n        <Route index element={<DashboardPage />} />\n        <Route path=\"new\" element={<NewWidgetPage />} />\n        <Route path=\":id\" element={<WidgetPage />} />\n      </Route>\n    </Routes>\n  );\n};\n\nexport default function App() {\n  React.useEffect(() => {\n    fetchAll(store);\n  }, []);\n\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <CssBaseline />\n        <ThemeProvider theme={theme}>\n          <AppRoutes />\n        </ThemeProvider>\n      </BrowserRouter>\n    </Provider>\n  );\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./app\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}