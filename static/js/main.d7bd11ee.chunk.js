(this.webpackJsonpnarvi=this.webpackJsonpnarvi||[]).push([[0],{281:function(e,t,n){},404:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(56),c=n.n(i),l=(n(281),n(118)),s=n(16),o=n(167),u=n(478),b=n(487),d=n(63),j=n(15),h=n(116),f=n.n(h);function g(e,t,n,a){return{id:e,meta:{title:t,schema:n.map((function(e){return{field:e.field,type:e.type}}))},data:f()(0,a).map((function(e){return n.reduce((function(e,t){return[].concat(Object(j.a)(e),[t.value(e)])}),[])}))}}var O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(){return Number((Math.random()*(t-e)+e).toFixed(n))}},p=function(e){var t=e.reduce((function(e,t,n){return[].concat(Object(j.a)(e),[t.weight+(e[n-1]||0)])}),[]),n=t[t.length-1];return function(){return e[function(){var e=Math.random()*n;return t.findIndex((function(t,n){return t>e}))}()].label}},m=p([{label:"\u5927\u4f17",weight:2},{label:"\u9886\u514b",weight:.3},{label:"\u957f\u57ce",weight:1.5},{label:"\u901a\u7528",weight:.7}]),x=p([{label:"\u7ae0\u9730",weight:.5},{label:"\u9ece\u601d",weight:1},{label:"\u65fa\u6b66",weight:2},{label:"\u90b9\u67f3",weight:1.4}]),v=p([{label:"\u6c38\u8fbe\u96c6\u56e2",weight:2},{label:"\u6d59\u6c5f\u7269\u4ea7\u5143\u901a",weight:2},{label:"\u5e7f\u6c47\u6c7d\u8f66",weight:.4},{label:"\u4e2d\u5347\u96c6\u56e2",weight:.7}]),w=p([{label:"\u4e0a\u6d77",weight:2.3},{label:"\u5317\u4eac",weight:2},{label:"\u5408\u80a5",weight:.4},{label:"\u6b66\u6c49",weight:.7},{label:"\u6d77\u95e8",weight:.3},{label:"\u9102\u5c14\u591a\u65af",weight:.2},{label:"\u821f\u5c71",weight:.1},{label:"\u9f50\u9f50\u54c8\u5c14",weight:.3},{label:"\u76d0\u57ce",weight:.2},{label:"\u6cc9\u5dde",weight:.3},{label:"\u65e5\u7167",weight:.2},{label:"\u5357\u901a",weight:.3},{label:"\u62c9\u8428",weight:.2},{label:"\u6587\u767b",weight:.3},{label:"\u5a01\u6d77",weight:.3},{label:"\u627f\u5fb7",weight:.3},{label:"\u53a6\u95e8",weight:.5},{label:"\u592a\u4ed3",weight:.3},{label:"\u70df\u53f0",weight:.3},{label:"\u798f\u5dde",weight:.3},{label:"\u6606\u5c71",weight:.6},{label:"\u5b81\u6ce2",weight:.3},{label:"\u6e5b\u6c5f",weight:.3},{label:"\u8fde\u4e91\u6e2f",weight:.3},{label:"\u846b\u82a6\u5c9b",weight:.1},{label:"\u5e38\u719f",weight:.3},{label:"\u4e1c\u839e",weight:.3},{label:"\u6c5f\u9634",weight:.3},{label:"\u84ec\u83b1",weight:.3},{label:"\u97f6\u5173",weight:.2},{label:"\u5609\u5cea\u5173",weight:.1},{label:"\u5e7f\u5dde",weight:.8},{label:"\u5ef6\u5b89",weight:.3},{label:"\u592a\u539f",weight:.3},{label:"\u6e05\u8fdc",weight:.3},{label:"\u5bff\u5149",weight:.3},{label:"\u76d8\u9526",weight:.3},{label:"\u957f\u6cbb",weight:.3},{label:"\u6df1\u5733",weight:.7},{label:"\u73e0\u6d77",weight:.6},{label:"\u4f5b\u5c71",weight:.4},{label:"\u6d77\u53e3",weight:.3},{label:"\u6c5f\u95e8",weight:.3},{label:"\u5927\u8fde",weight:.4},{label:"\u4e34\u6c7e",weight:.1},{label:"\u5434\u6c5f",weight:.3},{label:"\u77f3\u5634\u5c71",weight:.1},{label:"\u6c88\u9633",weight:.3},{label:"\u82cf\u5dde",weight:.6},{label:"\u8302\u540d",weight:.3},{label:"\u5609\u5174",weight:.3},{label:"\u957f\u6625",weight:.3},{label:"\u80f6\u5dde",weight:.3},{label:"\u94f6\u5ddd",weight:.3},{label:"\u5f20\u5bb6\u6e2f",weight:.3},{label:"\u9526\u5dde",weight:.3},{label:"\u4e09\u4e9a",weight:.3},{label:"\u6cf8\u5dde",weight:.3},{label:"\u897f\u5b81",weight:.3},{label:"\u547c\u548c\u6d69\u7279",weight:.3},{label:"\u6210\u90fd",weight:.3},{label:"\u5927\u540c",weight:.3},{label:"\u9547\u6c5f",weight:.3},{label:"\u6842\u6797",weight:.2},{label:"\u5f20\u5bb6\u754c",weight:.1},{label:"\u5b9c\u5174",weight:.3},{label:"\u897f\u5b89",weight:.3},{label:"\u7261\u4e39\u6c5f",weight:.3},{label:"\u9075\u4e49",weight:.3},{label:"\u7ecd\u5174",weight:.3},{label:"\u626c\u5dde",weight:.3},{label:"\u5e38\u5dde",weight:.3},{label:"\u91cd\u5e86",weight:.5},{label:"\u53f0\u5dde",weight:.3},{label:"\u5357\u4eac",weight:.4},{label:"\u8d35\u9633",weight:.3},{label:"\u65e0\u9521",weight:.3},{label:"\u5f90\u5dde",weight:.3},{label:"\u5305\u5934",weight:.3},{label:"\u4e4c\u9c81\u6728\u9f50",weight:.5},{label:"\u676d\u5dde",weight:.7},{label:"\u6ea7\u9633",weight:.3},{label:"\u5b89\u9633",weight:.3},{label:"\u5f00\u5c01",weight:.3},{label:"\u6d4e\u5357",weight:.3},{label:"\u6e29\u5dde",weight:.3},{label:"\u90af\u90f8",weight:.3},{label:"\u4e34\u5b89",weight:.3},{label:"\u5170\u5dde",weight:.3},{label:"\u5357\u5145",weight:.3},{label:"\u5929\u6d25",weight:.3},{label:"\u5bcc\u9633",weight:.3},{label:"\u6cf0\u5b89",weight:.3},{label:"\u8bf8\u66a8",weight:.3},{label:"\u90d1\u5dde",weight:.3},{label:"\u54c8\u5c14\u6ee8",weight:.3},{label:"\u5510\u5c71",weight:.3},{label:"\u5e73\u9876\u5c71",weight:.3},{label:"\u5fb7\u5dde",weight:.3},{label:"\u6d4e\u5b81",weight:.3},{label:"\u8346\u5dde",weight:.3},{label:"\u5b9c\u660c",weight:.3},{label:"\u4e49\u4e4c",weight:.3},{label:"\u4e3d\u6c34",weight:.3},{label:"\u6d1b\u9633",weight:.3},{label:"\u79e6\u7687\u5c9b",weight:.3},{label:"\u682a\u6d32",weight:.3},{label:"\u77f3\u5bb6\u5e84",weight:.3},{label:"\u5e38\u5fb7",weight:.3},{label:"\u4fdd\u5b9a",weight:.3},{label:"\u957f\u6c99",weight:.3},{label:"\u5927\u5e86",weight:.3}]),y=g("staffKpi","\u9500\u552e\u987e\u95ee\u80fd\u529b\u6a21\u578b",[{field:"\u65e5\u671f",type:"string",value:p(f()(1,13).map((function(e){return{label:"2020\u5e74".concat(e,"\u6708"),weight:1-e%3/5}})))},{field:"\u9500\u552e\u987e\u95ee",type:"string",value:x},{field:"\u57ce\u5e02",type:"string",value:w},{field:"\u7ecf\u9500\u5546",type:"string",value:v},{field:"\u7535\u8bdd\u8054\u7cfb\u4eba\u6570",type:"number",value:O(0,200)},{field:"\u52a0\u5fae\u4eba\u6570",type:"number",value:O(0,170)},{field:"\u5230\u5e97\u4eba\u6570",type:"number",value:O(0,90)},{field:"\u518d\u6b21\u5230\u5e97\u4eba\u6570",type:"number",value:O(0,50)},{field:"\u5b8c\u6574\u5ba2\u6237\u6863\u6848\u6570",type:"number",value:O(0,10)},{field:"\u8bd5\u9a7e\u4eba\u6570",type:"number",value:O(0,30)},{field:"\u8ba2\u5355\u6570\u91cf",type:"number",value:O(0,26)},{field:"\u4ea4\u4ed8\u6570\u91cf",type:"number",value:O(0,20)},{field:"\u8ba2\u5355\u91d1\u989d",type:"number",value:O(18e4,22e4)}],1e3),C=g("autoSales","\u9500\u552e\u6570\u636e",[{field:"\u65e5\u671f",type:"string",value:p(f()(1,13).map((function(e){return{label:"2020\u5e74".concat(e,"\u6708"),weight:1-e%3/10}})))},{field:"\u57ce\u5e02",type:"string",value:w},{field:"\u7ecf\u9500\u5546",type:"string",value:v},{field:"\u54c1\u724c",type:"string",value:m},{field:"\u8f66\u578b",type:"string",value:function(e){switch(e[3]){case"\u5927\u4f17":return p([{label:"\u65b0\u5e15\u8428\u7279",weight:2}])();case"\u9886\u514b":return p([{label:"\u9886\u514b03",weight:2},{label:"\u9886\u514b01",weight:1}])();case"\u957f\u57ce":return p([{label:"\u54c8\u5f17H6",weight:1}])();case"\u901a\u7528":return p([{label:"\u541b\u5a01",weight:1}])();default:return"\u672a\u77e5\u8f66\u578b"}}},{field:"\u7ebf\u4e0a\u8be2\u95ee\u6b21\u6570",type:"number",value:O(0,20)},{field:"\u5230\u5e97\u8bbf\u5ba2\u6570",type:"number",value:O(0,12)},{field:"\u8ba2\u5355\u6570\u91cf",type:"number",value:O(0,3)},{field:"\u4ea4\u4ed8\u6570\u91cf",type:"number",value:O(0,2)},{field:"\u8ba2\u5355\u91d1\u989d",type:"number",value:function(e){switch(e[4]){case"\u65b0\u5e15\u8428\u7279":return O(18e4,22e4)();case"\u9886\u514b03":return O(12e4,18e4)();case"\u9886\u514b01":return O(13e4,16e4)();case"\u54c8\u5f17H6":return O(8e4,11e4)();case"\u541b\u5a01":return O(11e4,17e4)();default:return 1e5}}}],1e3),S=g("example","\u793a\u4f8b\u6570\u636e",[{field:"age",type:"number",value:O(5,90)},{field:"city",type:"string",value:p([{label:"Melbourne",weight:2},{label:"Sydney",weight:1}])}],100),T=Object(d.b)("fetched"),k=Object(d.c)({name:"auth",initialState:{loaded:!1,userInfo:null},reducers:{},extraReducers:function(e){e.addCase(T,(function(e,t){e.loaded=!0,e.userInfo=t.payload.userInfo}))}}),z=(k.actions,k.reducer),R=Object(d.c)({name:"dashboard",initialState:{widgets:[]},reducers:{},extraReducers:function(e){e.addCase(T,(function(e,t){e.widgets=t.payload.widgets}))}}).reducer,M=Object(d.c)({name:"datasources",initialState:{allDatasources:[]},reducers:{},extraReducers:function(e){e.addCase(T,(function(e,t){e.allDatasources=t.payload.datasources}))}}).reducer,D=Object(d.a)({reducer:{auth:z,dashboard:R,datasource:M}}),$=l.c,I=n(172),L=n(93),E=Object(I.a)({palette:{error:{main:L.a.A400}}}),F=n(492),W=n(468),B=n(147),N=n(8),P=n(12),A=n(5),G=n(489),q=n(490),H=n(96),J=n(491),U=n(136),_=n.n(U),K=n(481),Q=n(467),V=n(469),X=n(485),Y=n(95),Z=n(470),ee=n(488),te={males:[n.p+"static/media/male01.2f896a99.png",n.p+"static/media/male02.b5383c37.png",n.p+"static/media/male03.7bd4eace.png",n.p+"static/media/male04.8d984ec6.png"],females:[n.p+"static/media/female01.4d996702.png",n.p+"static/media/female02.693c7dad.png",n.p+"static/media/female03.da34e445.png",n.p+"static/media/female04.88ab3203.png",n.p+"static/media/female05.a7f81fa6.png"]};function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"female",n="male"===t?te.males:te.females;return n[e.charCodeAt(0)%n.length]}var ae=n(1),re=[{uri:"/narvi",label:"Home",exact:!0},{uri:"/narvi/dashboard",label:"Dashboard"}],ie=function(e){var t=e.exact,n=void 0!==t&&t,a=e.to,r=Boolean(Object(s.g)({path:a,end:Boolean(n)})),i=Object(s.h)();return Object(ae.jsx)(K.a,{children:Object(ae.jsx)(Q.a,{href:a,onClick:function(){return i(a)},disabled:r,sx:{"&.Mui-disabled":{opacity:1}},children:Object(ae.jsx)(B.a,{variant:"h6",align:"center",sx:{flex:1,color:r?"text.primary":"text.disabled"},children:e.children})})})};function ce(){var e=$((function(e){return e.auth})),t=e.loaded,n=e.userInfo,a=Object(s.h)();return t?Object(ae.jsxs)(W.a,{component:"nav",children:[Object(ae.jsx)(V.a,{alignItems:"center",my:2,spacing:2,children:n?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(X.a,{sx:{width:96,height:96,bgcolor:"primary.light"},src:n.photoURL||ne(n.displayName||n.email)}),Object(ae.jsxs)(W.a,{sx:{textAlign:"center"},children:[Object(ae.jsx)(B.a,{variant:"subtitle1",children:n.displayName}),Object(ae.jsx)(B.a,{variant:"body2",color:"textSecondary",children:n.email})]}),Object(ae.jsx)(Y.a,{color:"secondary",onClick:function(){},children:"Signout"})]}):Object(ae.jsx)(Y.a,{color:"secondary",onClick:function(){a("/narvi/auth/signin")},children:"Signin"})}),Object(ae.jsxs)(V.a,{px:2,children:[Object(ae.jsx)(Z.a,{}),Object(ae.jsx)(ee.a,{children:re.map((function(e){var t=e.uri,n=e.label,a=e.exact;return Object(ae.jsx)(ie,{to:t,exact:a,children:n},t)}))})]})]}):null}var le=Object(A.a)(G.a,{shouldForwardProp:function(e){return["open","rightDrawerWidth"].indexOf(e)<0}})((function(e){var t=e.theme,n=e.open,a=e.rightDrawerWidth;return Object(P.a)({transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(a,"px)"),transition:t.transitions.create(["margin","width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginRight:a})})),se=Object(A.a)("div")((function(e){return{display:"flex",height:"100vh",width:"100vw",overflow:"hidden",backgroundColor:e.theme.palette.grey[50]}}));function oe(e){var t=e.title,n=e.actions,a=e.children,i=e.rightDrawerWidth,c=void 0===i?0:i,l=e.rightDrawerOpen,s=void 0!==l&&l,o=r.a.useState(!1),u=Object(N.a)(o,2),b=u[0],d=u[1];return Object(ae.jsxs)(se,{children:[Object(ae.jsx)(le,{rightDrawerWidth:c,open:s,children:Object(ae.jsxs)(q.a,{children:[Object(ae.jsx)(H.a,{sx:{mr:2},color:"inherit",edge:"start",onClick:function(){return d(!0)},children:Object(ae.jsx)(_.a,{})}),Object(ae.jsx)(B.a,{sx:{flexGrow:1},variant:"h6",noWrap:!0,children:t}),n&&Object(ae.jsx)(W.a,{ml:1,children:n})]})}),Object(ae.jsx)(J.a,{sx:{"& .MuiDrawer-paper":{width:300}},variant:"temporary",open:b,onClose:function(){return d(!1)},anchor:"left",ModalProps:{keepMounted:!0},children:Object(ae.jsx)(ce,{})}),a]})}var ue=function(e){return Object(ae.jsx)(W.a,{component:"main",sx:{flexGrow:1,overflow:"auto",backgroundColor:function(e){return"light"===e.palette.mode?e.palette.grey[100]:e.palette.grey[900]}},children:e.children})},be=(n(37),n(474),n(47)),de=n(493);n(226),n(227),n(228);function je(){return Object(ae.jsx)(oe,{title:"Home",children:Object(ae.jsx)(ue,{children:Object(ae.jsx)(F.a,{component:"article",children:Object(ae.jsx)(W.a,{sx:{height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(ae.jsx)(B.a,{variant:"h2",children:"Landing Page"})})})})})}var he=n(486),fe=n(101),ge=n.n(fe),Oe=n(3),pe=n(229),me={"||":function(e,t){return e||t},"&&":function(e,t){return e&&t},"|":function(e,t){return e|t},"^":function(e,t){return e^t},"&":function(e,t){return e&t},"==":function(e,t){return e===t},"!=":function(e,t){return e!==t},"===":function(e,t){return e===t},"!==":function(e,t){return e!==t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"<<":function(e,t){return e<<t},">>":function(e,t){return e>>t},">>>":function(e,t){return e>>>t},"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t}},xe={"-":function(e){return-e},"+":function(e){return+e},"~":function(e){return~e},"!":function(e){return!e}},ve={sum:function(e,t,n){return e+we(n[0],t)},count:function(e,t,n){return e+1}};function we(e,t){switch(e.type){case"BinaryExpression":var n=e.left,a=e.right,r=e.operator;return me[r](we(n,t),we(a,t));case"Identifier":return t[e.name];case"Literal":return e.value;case"UnaryExpression":return xe[e.operator](we(e.argument,t));case"CallExpression":return e.state;default:return}}function ye(e,t){switch(e.type){case"BinaryExpression":return Object(P.a)(Object(P.a)({},e),{},{left:ye(e.left,t),right:ye(e.right,t)});case"UnaryExpression":return Object(P.a)(Object(P.a)({},e),{},{argument:ye(e.argument,t)});case"CallExpression":var n=e.callee.name,a=e.state||0;return Object(P.a)(Object(P.a)({},e),{},{state:ve[n](a,t,e.arguments)});default:return e}}function Ce(e){return Object(pe.a)(e)}function Se(e,t,n){var a=e.data,r=e.meta.schema.map((function(e){return"$".concat(e.field)})),i=Ce(t),c=a.reduce((function(e,t){var a=function(e){return e.reduce((function(e,t,n){return Object(P.a)(Object(P.a)({},e),{},Object(Oe.a)({},r[n],t))}),{})}(t),c=we(i,a),l=n.reduce((function(e,t){var n=t.name;return Object(P.a)(Object(P.a)({},e),{},Object(Oe.a)({},n,ye(e[n],a)))}),e[c]||n.reduce((function(e,t){var n=t.name,a=t.expression;return Object(P.a)(Object(P.a)({},e),{},Object(Oe.a)({},n,Ce(a)))}),{}));return Object(P.a)(Object(P.a)({},e),{},Object(Oe.a)({},c,l))}),{});return Object.entries(c).reduce((function(e,t){var n=Object(N.a)(t,2),a=n[0],r=n[1],i=Object.entries(r).reduce((function(e,t){var n=Object(N.a)(t,2),a=n[0],r=n[1];return Object(P.a)(Object(P.a)({},e),{},Object(Oe.a)({},a,we(r,{})))}),{});return Object(P.a)(Object(P.a)({},e),{},Object(Oe.a)({},a,i))}),{})}var Te=n(32);n(405);function ke(e){var t=e.option,n=e.style,a=e.settings,i=e.loading,c=e.theme,l=e.size,s=r.a.useRef(null);return r.a.useEffect((function(){var e;function t(){var t;null===(t=e)||void 0===t||t.resize()}return null!==s.current&&(e=Object(Te.e)(s.current,c)),window.addEventListener("resize",t),function(){var n;null===(n=e)||void 0===n||n.dispose(),window.removeEventListener("resize",t)}}),[c,l]),r.a.useEffect((function(){null!==s.current&&Object(Te.c)(s.current).setOption(t)}),[t,a,c]),r.a.useEffect((function(){if(null!==s.current){var e=Object(Te.c)(s.current);!0===i?e.showLoading():e.hideLoading()}}),[i,c]),Object(ae.jsx)("div",{ref:s,style:Object(P.a)({width:"100%",height:"100px"},n)})}var ze=n(249),Re={small:{xs:12,sm:6,md:4,lg:3},medium:{xs:12,sm:12,md:8,lg:6},large:{xs:12}};function Me(e){var t=e.title,n=e.size,a=void 0===n?"small":n,r=e.children,i=e.actions,c=Re[a];return Object(ae.jsx)(he.a,Object(P.a)(Object(P.a)({item:!0},c),{},{children:Object(ae.jsxs)(ze.a,{children:[t&&Object(ae.jsxs)(W.a,{p:2,display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(ae.jsx)(B.a,{children:t}),i]}),r]})}))}var De=["showLegend","category","series","groupResult"];function $e(e){var t=e.showLegend,n=void 0===t||t,a=(e.category,e.series),i=e.groupResult,c=Object(be.a)(e,De),l=r.a.useMemo((function(){return{series:a.reduce((function(e,t){var n=Object.entries(i).map((function(e){var n=Object(N.a)(e,2);n[0];return n[1][t.name]}));return{series:[].concat(Object(j.a)(e.series),[{name:t.name,type:t.type||"bar",data:n}])}}),{series:[]}).series}}),[a,i]),s=Object(P.a)(Object(P.a)({},l),{},{xAxis:{type:"category"},yAxis:{},legend:{show:n}});return Object(ae.jsx)(Me,Object(P.a)(Object(P.a)({},c),{},{children:Object(ae.jsx)(ke,{option:s,style:{height:300},size:e.size})}))}var Ie={"\u6d77\u95e8":[121.15,31.89],"\u9102\u5c14\u591a\u65af":[109.781327,39.608266],"\u62db\u8fdc":[120.38,37.35],"\u821f\u5c71":[122.207216,29.985295],"\u9f50\u9f50\u54c8\u5c14":[123.97,47.33],"\u76d0\u57ce":[120.13,33.38],"\u8d64\u5cf0":[118.87,42.28],"\u9752\u5c9b":[120.33,36.07],"\u4e73\u5c71":[121.52,36.89],"\u91d1\u660c":[102.188043,38.520089],"\u6cc9\u5dde":[118.58,24.93],"\u83b1\u897f":[120.53,36.86],"\u65e5\u7167":[119.46,35.42],"\u80f6\u5357":[119.97,35.88],"\u5357\u901a":[121.05,32.08],"\u62c9\u8428":[91.11,29.97],"\u4e91\u6d6e":[112.02,22.93],"\u6885\u5dde":[116.1,24.55],"\u6587\u767b":[122.05,37.2],"\u4e0a\u6d77":[121.48,31.22],"\u6500\u679d\u82b1":[101.718637,26.582347],"\u5a01\u6d77":[122.1,37.5],"\u627f\u5fb7":[117.93,40.97],"\u53a6\u95e8":[118.1,24.46],"\u6c55\u5c3e":[115.375279,22.786211],"\u6f6e\u5dde":[116.63,23.68],"\u4e39\u4e1c":[124.37,40.13],"\u592a\u4ed3":[121.1,31.45],"\u66f2\u9756":[103.79,25.51],"\u70df\u53f0":[121.39,37.52],"\u798f\u5dde":[119.3,26.08],"\u74e6\u623f\u5e97":[121.979603,39.627114],"\u5373\u58a8":[120.45,36.38],"\u629a\u987a":[123.97,41.97],"\u7389\u6eaa":[102.52,24.35],"\u5f20\u5bb6\u53e3":[114.87,40.82],"\u9633\u6cc9":[113.57,37.85],"\u83b1\u5dde":[119.942327,37.177017],"\u6e56\u5dde":[120.1,30.86],"\u6c55\u5934":[116.69,23.39],"\u6606\u5c71":[120.95,31.39],"\u5b81\u6ce2":[121.56,29.86],"\u6e5b\u6c5f":[110.359377,21.270708],"\u63ed\u9633":[116.35,23.55],"\u8363\u6210":[122.41,37.16],"\u8fde\u4e91\u6e2f":[119.16,34.59],"\u846b\u82a6\u5c9b":[120.836932,40.711052],"\u5e38\u719f":[120.74,31.64],"\u4e1c\u839e":[113.75,23.04],"\u6cb3\u6e90":[114.68,23.73],"\u6dee\u5b89":[119.15,33.5],"\u6cf0\u5dde":[119.9,32.49],"\u5357\u5b81":[108.33,22.84],"\u8425\u53e3":[122.18,40.65],"\u60e0\u5dde":[114.4,23.09],"\u6c5f\u9634":[120.26,31.91],"\u84ec\u83b1":[120.75,37.8],"\u97f6\u5173":[113.62,24.84],"\u5609\u5cea\u5173":[98.289152,39.77313],"\u5e7f\u5dde":[113.23,23.16],"\u5ef6\u5b89":[109.47,36.6],"\u592a\u539f":[112.53,37.87],"\u6e05\u8fdc":[113.01,23.7],"\u4e2d\u5c71":[113.38,22.52],"\u6606\u660e":[102.73,25.04],"\u5bff\u5149":[118.73,36.86],"\u76d8\u9526":[122.070714,41.119997],"\u957f\u6cbb":[113.08,36.18],"\u6df1\u5733":[114.07,22.62],"\u73e0\u6d77":[113.52,22.3],"\u5bbf\u8fc1":[118.3,33.96],"\u54b8\u9633":[108.72,34.36],"\u94dc\u5ddd":[109.11,35.09],"\u5e73\u5ea6":[119.97,36.77],"\u4f5b\u5c71":[113.11,23.05],"\u6d77\u53e3":[110.35,20.02],"\u6c5f\u95e8":[113.06,22.61],"\u7ae0\u4e18":[117.53,36.72],"\u8087\u5e86":[112.44,23.05],"\u5927\u8fde":[121.62,38.92],"\u4e34\u6c7e":[111.5,36.08],"\u5434\u6c5f":[120.63,31.16],"\u77f3\u5634\u5c71":[106.39,39.04],"\u6c88\u9633":[123.38,41.8],"\u82cf\u5dde":[120.62,31.32],"\u8302\u540d":[110.88,21.68],"\u5609\u5174":[120.76,30.77],"\u957f\u6625":[125.35,43.88],"\u80f6\u5dde":[120.03336,36.264622],"\u94f6\u5ddd":[106.27,38.47],"\u5f20\u5bb6\u6e2f":[120.555821,31.875428],"\u4e09\u95e8\u5ce1":[111.19,34.76],"\u9526\u5dde":[121.15,41.13],"\u5357\u660c":[115.89,28.68],"\u67f3\u5dde":[109.4,24.33],"\u4e09\u4e9a":[109.511909,18.252847],"\u81ea\u8d21":[104.778442,29.33903],"\u5409\u6797":[126.57,43.87],"\u9633\u6c5f":[111.95,21.85],"\u6cf8\u5dde":[105.39,28.91],"\u897f\u5b81":[101.74,36.56],"\u5b9c\u5bbe":[104.56,29.77],"\u547c\u548c\u6d69\u7279":[111.65,40.82],"\u6210\u90fd":[104.06,30.67],"\u5927\u540c":[113.3,40.12],"\u9547\u6c5f":[119.44,32.2],"\u6842\u6797":[110.28,25.29],"\u5f20\u5bb6\u754c":[110.479191,29.117096],"\u5b9c\u5174":[119.82,31.36],"\u5317\u6d77":[109.12,21.49],"\u897f\u5b89":[108.95,34.27],"\u91d1\u575b":[119.56,31.74],"\u4e1c\u8425":[118.49,37.46],"\u7261\u4e39\u6c5f":[129.58,44.6],"\u9075\u4e49":[106.9,27.7],"\u7ecd\u5174":[120.58,30.01],"\u626c\u5dde":[119.42,32.39],"\u5e38\u5dde":[119.95,31.79],"\u6f4d\u574a":[119.1,36.62],"\u91cd\u5e86":[106.54,29.59],"\u53f0\u5dde":[121.420757,28.656386],"\u5357\u4eac":[118.78,32.04],"\u6ee8\u5dde":[118.03,37.36],"\u8d35\u9633":[106.71,26.57],"\u65e0\u9521":[120.29,31.59],"\u672c\u6eaa":[123.73,41.3],"\u514b\u62c9\u739b\u4f9d":[84.77,45.59],"\u6e2d\u5357":[109.5,34.52],"\u9a6c\u978d\u5c71":[118.48,31.56],"\u5b9d\u9e21":[107.15,34.38],"\u7126\u4f5c":[113.21,35.24],"\u53e5\u5bb9":[119.16,31.95],"\u5317\u4eac":[116.46,39.92],"\u5f90\u5dde":[117.2,34.26],"\u8861\u6c34":[115.72,37.72],"\u5305\u5934":[110,40.58],"\u7ef5\u9633":[104.73,31.48],"\u4e4c\u9c81\u6728\u9f50":[87.68,43.77],"\u67a3\u5e84":[117.57,34.86],"\u676d\u5dde":[120.19,30.26],"\u6dc4\u535a":[118.05,36.78],"\u978d\u5c71":[122.85,41.12],"\u6ea7\u9633":[119.48,31.43],"\u5e93\u5c14\u52d2":[86.06,41.68],"\u5b89\u9633":[114.35,36.1],"\u5f00\u5c01":[114.35,34.79],"\u6d4e\u5357":[117,36.65],"\u5fb7\u9633":[104.37,31.13],"\u6e29\u5dde":[120.65,28.01],"\u4e5d\u6c5f":[115.97,29.71],"\u90af\u90f8":[114.47,36.6],"\u4e34\u5b89":[119.72,30.23],"\u5170\u5dde":[103.73,36.03],"\u6ca7\u5dde":[116.83,38.33],"\u4e34\u6c82":[118.35,35.05],"\u5357\u5145":[106.110698,30.837793],"\u5929\u6d25":[117.2,39.13],"\u5bcc\u9633":[119.95,30.07],"\u6cf0\u5b89":[117.13,36.18],"\u8bf8\u66a8":[120.23,29.71],"\u90d1\u5dde":[113.65,34.76],"\u54c8\u5c14\u6ee8":[126.63,45.75],"\u804a\u57ce":[115.97,36.45],"\u829c\u6e56":[118.38,31.33],"\u5510\u5c71":[118.02,39.63],"\u5e73\u9876\u5c71":[113.29,33.75],"\u90a2\u53f0":[114.48,37.05],"\u5fb7\u5dde":[116.29,37.45],"\u6d4e\u5b81":[116.59,35.38],"\u8346\u5dde":[112.239741,30.335165],"\u5b9c\u660c":[111.3,30.7],"\u4e49\u4e4c":[120.06,29.32],"\u4e3d\u6c34":[119.92,28.45],"\u6d1b\u9633":[112.44,34.7],"\u79e6\u7687\u5c9b":[119.57,39.95],"\u682a\u6d32":[113.16,27.83],"\u77f3\u5bb6\u5e84":[114.48,38.03],"\u83b1\u829c":[117.67,36.19],"\u5e38\u5fb7":[111.69,29.05],"\u4fdd\u5b9a":[115.48,38.85],"\u6e58\u6f6d":[112.91,27.87],"\u91d1\u534e":[119.64,29.12],"\u5cb3\u9633":[113.09,29.37],"\u957f\u6c99":[113,28.21],"\u8862\u5dde":[118.88,28.97],"\u5eca\u574a":[116.7,39.53],"\u83cf\u6cfd":[115.480656,35.23375],"\u5408\u80a5":[117.27,31.86],"\u6b66\u6c49":[114.31,30.52],"\u5927\u5e86":[125.03,46.58]},Le=["showLegend","category","series","groupResult"],Ee=["#f4e925","#f37848"];function Fe(e){var t=e.showLegend,n=void 0===t||t,a=(e.category,e.series),i=e.groupResult,c=Object(be.a)(e,Le),l={backgroundColor:"transparent",legend:{show:n,backgroundColor:"rgba(255,255,255,.5)"},tooltip:{trigger:"item"},bmap:{center:[104.114129,37.550339],zoom:4,roam:!0,mapStyle:{styleJson:[{featureType:"water",elementType:"all",stylers:{color:"#044161"}},{featureType:"land",elementType:"all",stylers:{color:"#004981"}},{featureType:"boundary",elementType:"geometry",stylers:{color:"#064f85"}},{featureType:"railway",elementType:"all",stylers:{visibility:"off"}},{featureType:"highway",elementType:"geometry",stylers:{color:"#004981"}},{featureType:"highway",elementType:"geometry.fill",stylers:{color:"#005b96",lightness:1}},{featureType:"highway",elementType:"labels",stylers:{visibility:"off"}},{featureType:"arterial",elementType:"geometry",stylers:{color:"#004981"}},{featureType:"arterial",elementType:"geometry.fill",stylers:{color:"#00508b"}},{featureType:"poi",elementType:"all",stylers:{visibility:"off"}},{featureType:"green",elementType:"all",stylers:{color:"#056197",visibility:"off"}},{featureType:"subway",elementType:"all",stylers:{visibility:"off"}},{featureType:"manmade",elementType:"all",stylers:{visibility:"off"}},{featureType:"local",elementType:"all",stylers:{visibility:"off"}},{featureType:"arterial",elementType:"labels",stylers:{visibility:"off"}},{featureType:"boundary",elementType:"geometry.fill",stylers:{color:"#029fd4"}},{featureType:"building",elementType:"all",stylers:{color:"#1a5787"}},{featureType:"label",elementType:"all",stylers:{visibility:"off"}}]}},series:r.a.useMemo((function(){return a.map((function(e,t){var n=e.name,a=e.showLabel,r=void 0===a||a,c=e.color,l=e.size,s=void 0===l?"flat":l,o=[0,0],u=Object.entries(i).reduce((function(e,t){var a=Object(N.a)(t,2),r=a[0],i=a[1],c=Ie[r],l=i[n];return o=[Math.min(o[0],l),Math.max(o[1],l)],c?[].concat(Object(j.a)(e),[{name:r,value:[].concat(Object(j.a)(c),[l])}]):e}),[]);return{name:n,type:"effectScatter",coordinateSystem:"bmap",data:u,encode:{value:2},symbolSize:"flat"===s?function(){return 20}:function(e){return 2+35*e[2]/(o[1]-o[0])},showEffectOn:"emphasis",rippleEffect:{brushType:"stroke"},label:{formatter:"{b}",position:"right",show:r},itemStyle:{color:c||Ee[t%Ee.length],shadowBlur:10,shadowColor:"#333"},zlevel:t+1}}))}),[a,i])};return Object(ae.jsx)(Me,Object(P.a)(Object(P.a)({},c),{},{size:"large",children:Object(ae.jsx)(ke,{option:l,style:{height:500},size:"large"})}))}var We=["showLegend","category","series","groupResult"];function Be(e){var t=e.showLegend,n=void 0===t||t,a=e.category,i=e.series,c=e.groupResult,l=Object(be.a)(e,We),s=r.a.useMemo((function(){var e=i.map((function(e){var t=Object.entries(c).reduce((function(t,n){var a=Object(N.a)(n,2),r=(a[0],a[1]);return Math.max(t,r[e.name])}),Number.MIN_SAFE_INTEGER);return{text:e.name,max:t}})),t=Object.keys(c).map((function(e){return{value:i.map((function(t){var n=t.name;return c[e][n]})),name:e}}));return{series:[{name:a,type:"radar",data:t}],radar:{indicator:e,center:["50%","60%"],radius:105,axisName:{color:"#fff",backgroundColor:"#666",borderRadius:3,padding:[3,5]}}}}),[a,i,c]),o=Object(P.a)({legend:{show:n}},s);return Object(ae.jsx)(Me,Object(P.a)(Object(P.a)({},l),{},{children:Object(ae.jsx)(ke,{option:o,style:{height:300},size:e.size})}))}var Ne=function(e){var t=e.actions,n=e.spec,a=e.groupResult;switch(n.type){case"radar":return Object(ae.jsx)(Be,Object(P.a)({groupResult:a,actions:t},n));case"bmap":return Object(ae.jsx)(Fe,Object(P.a)({groupResult:a,actions:t},n));default:return Object(ae.jsx)($e,Object(P.a)({groupResult:a,actions:t},n))}},Pe=n(117),Ae=n.n(Pe),Ge=n(239),qe=n(58),He=function(e){var t=e.widget,n=r.a.useState(null),a=Object(N.a)(n,2),i=a[0],c=a[1],l=Object(s.h)(),o=$((function(e){if(t.datasource)return e.datasource.allDatasources.find((function(e){return e.id===t.datasource}))})),u=r.a.useMemo((function(){if(o&&t.label&&t.output)return Se(o,t.label,t.output)}),[o,t]);return u?Object(ae.jsx)(ae.Fragment,{children:(t.charts||[]).map((function(e,n){return Object(ae.jsx)(Ne,{spec:e,groupResult:u,actions:Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(H.a,{onClick:function(e){return c(e.currentTarget)},children:Object(ae.jsx)(Ae.a,{})}),Object(ae.jsx)(Ge.a,{open:Boolean(i),onClose:function(){return c(null)},anchorEl:i,children:Object(ae.jsx)(qe.a,{onClick:function(){return c(null),void l("/narvi/dashboard/".concat(t.id))},children:"Edit"})})]})},n)}))}):null},Je=n(475);function Ue(){var e=Object(s.h)(),t=$((function(e){return e.dashboard.widgets}));return Object(ae.jsx)(oe,{title:"Dashboard",actions:Object(ae.jsx)(H.a,{color:"inherit",onClick:function(){return e("new")},children:Object(ae.jsx)(ge.a,{})}),children:Object(ae.jsxs)(ue,{children:[Object(ae.jsx)(q.a,{}),Object(ae.jsx)(F.a,{component:"article",children:Object(ae.jsx)(he.a,{sx:{mt:2},container:!0,spacing:2,children:t.map((function(e){return Object(ae.jsx)(He,{widget:e},e.id)}))})}),Object(ae.jsx)(Je.a,{mt:6,height:200,component:"footer",bgcolor:"#333",color:"#FFF",display:"flex",alignItems:"flex-end",justifyContent:"center",p:4,children:Object(ae.jsx)(B.a,{variant:"body2",color:"inherit",children:"\xa92021 Copyright by Skinnyworm"})})]})})}var _e=n(484),Ke=n(139),Qe=n.n(Ke),Ve=["to"],Xe=function(e){var t=Object(s.h)(),n=e.to,a=Object(be.a)(e,Ve);return n?Object(ae.jsx)(de.a,Object(P.a)(Object(P.a)({},a),{},{onClick:function(e){e.preventDefault(),t(n)},href:n})):Object(ae.jsx)(de.a,Object(P.a)(Object(P.a)({},a),{},{target:"_blank",rel:"noopener noreferrer"}))},Ye=Object(A.a)("main",{shouldForwardProp:function(e){return["open","drawerWidth"].indexOf(e)<0}})((function(e){var t=e.theme,n=e.open,a=e.drawerWidth;return Object(P.a)({flexGrow:1,padding:t.spacing(3),overflow:"auto",transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginRight:-a},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginRight:0})})),Ze=n(236),et=n.n(Ze),tt=n(482),nt=n(499),at=n(480),rt=n(483),it=n(476);function ct(e){var t=e.datasources,n=e.value,a=e.onChange;return Object(ae.jsxs)(W.a,{children:[Object(ae.jsx)(B.a,{variant:"body2",children:"\u8bf7\u4ece\u5df2\u6709\u7684\u6570\u636e\u6e90\u4e2d\u9009\u62e9\u4e00\u4e2a\u8fdb\u884c\u6570\u636e\u8f6c\u6362\u3002\u5c3d\u7ba1\u6709\u591a\u79cd\u6570\u636e\u8f6c\u6362\u7684\u65b9\u6848\u53ef\u4f9b\u9009\u62e9\uff0c\u4f46\u5728\u672c\u6f14\u793a\u4e2d\u6211\u4eec\u4ec5\u4f7f\u7528Group\u7b56\u7565\u3002"}),Object(ae.jsx)(W.a,{border:1,mt:2,borderColor:"#CCC",borderRadius:1,children:Object(ae.jsx)(ee.a,{children:t.map((function(e){return Object(ae.jsx)(K.a,{dense:!0,disablePadding:!0,selected:e.id===n,children:Object(ae.jsx)(Q.a,{onClick:function(){return a(e.id)},children:Object(ae.jsx)(it.a,{primary:e.meta.title})})},e.id)}))})})]})}var lt=n(138),st=n.n(lt),ot=n(120),ut=n(173),bt=n(494),dt=n(137),jt=n(7),ht=n(233),ft=n(26),gt=n(237),Ot=(n(401),n(92)),pt=n(477),mt=function(e,t,n){for(var a,r,i=t.getText();null!==(a=e.exec(i));)n(r=a.index,r+a[0].length)},xt=[{strategy:function(e,t,n){mt(/(sum|count)/g,e,t)},component:function(e){var t=e.children;return Object(ae.jsx)("span",{style:{fontWeight:"bold",color:Ot.a[400]},children:t})}},{strategy:function(e,t,n){mt(/\$[^(\s|)|()]+/g,e,t)},component:function(e){var t=e.children;return Object(ae.jsx)("span",{style:{padding:2,backgroundColor:Ot.a[50],borderRadius:4,marginLeft:3,marginRight:3,display:"inline-block",color:pt.a[400]},children:t})}}],vt=["fields","value","onChange"],wt=r.a.forwardRef((function(e,t){var n=e.fields,a=e.value,i=e.onChange,c=Object(be.a)(e,vt),l=r.a.useMemo((function(){var e=Object(gt.a)({mentionTrigger:"$"});return{plugins:[e],MentionSuggestions:e.MentionSuggestions}}),[]),s=l.MentionSuggestions,o=l.plugins,u=r.a.useState(!1),b=Object(N.a)(u,2),d=b[0],j=b[1],h=r.a.useMemo((function(){return n.map((function(e){return{name:"$".concat(e)}}))}),[n]),f=r.a.useState(h),g=Object(N.a)(f,2),O=g[0],p=g[1],m=r.a.useState((function(){var e=ft.ContentState.createFromText(a);return ft.EditorState.createWithContent(e)})),x=Object(N.a)(m,2),v=x[0],w=x[1];return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(ht.a,Object(P.a)({editorKey:"editor",editorState:v,onChange:function(e){w(e),i(e.getCurrentContent().getPlainText())},ref:t,plugins:o,decorators:xt},c)),Object(ae.jsx)(s,{open:d,onOpenChange:function(e){return j(e)},suggestions:O,onSearchChange:function(e){return p(function(e,t,n){var a=e.toLowerCase(),r=(n&&!Array.isArray(t)?t[n]:t).filter((function(e){return!a||e.name.toLowerCase().indexOf(a)>-1})),i=r.length<10?r.length:10;return r.slice(0,i)}(e.value,h))},onAddMention:function(){}})]})})),yt=Object(A.a)("div")((function(e){var t,n=e.theme,a="light"===n.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return Object(P.a)(Object(P.a)({color:n.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",borderRadius:n.shape.borderRadius,padding:"16.5px 14px"},n.typography.body1),{},(t={"& > .DraftEditor-root":{flex:1}},Object(Oe.a)(t,"&:hover .notchedOutline",{borderColor:n.palette.text.primary}),Object(Oe.a)(t,"@media (hover: none)",Object(Oe.a)({},"&:hover .notchedOutline",{borderColor:a})),Object(Oe.a)(t,"&.focused .notchedOutline",{borderColor:n.palette.primary.main,borderWidth:2}),Object(Oe.a)(t,"&.error .notchedOutline",{borderColor:n.palette.error.main}),Object(Oe.a)(t,"&.disabled .notchedOutline",{borderColor:n.palette.action.disabled,color:n.palette.text.disabled,cursor:"default"}),t))}));function Ct(e){var t=e.label,n=e.helperText,a=e.value,i=e.onChange,c=e.fullWidth,l=e.margin,s=e.disabled,o=e.error,u=e.required,b=e.fields,d=void 0===b?[]:b,j=r.a.useRef(null),h=r.a.useState(!1),f=Object(N.a)(h,2),g=f[0],O=f[1];return Object(ae.jsxs)(ot.a,{fullWidth:c,margin:l,required:u,children:[t&&Object(ae.jsx)(ut.a,{className:"label",shrink:!0,focused:g,disabled:s,error:o,children:t}),Object(ae.jsxs)(yt,{onClick:function(){var e;return null===(e=j.current)||void 0===e?void 0:e.focus()},className:Object(jt.a)({focused:g,disabled:s,error:o}),children:[Object(ae.jsx)(wt,{ref:j,onFocus:function(){return O(!0)},onBlur:function(){return O(!1)},value:a,onChange:i,fields:d}),Object(ae.jsx)(dt.a,{className:"notchedOutline",label:u?"".concat(t," *"):t,notched:Boolean(t),focused:g})]}),n&&Object(ae.jsx)(bt.a,{id:"label-input-helper",children:n})]})}var St=n(39),Tt=n.n(St),kt=n(176),zt=n(146);function Rt(e){var t=e.schema,n=e.value,a=e.onSubmit,i=e.onClose,c=n.index,l=void 0!==c,s=r.a.useState(n.output),o=Object(N.a)(s,2),u=o[0],b=o[1],d=r.a.useMemo((function(){return t.filter((function(e){return"number"===e.type})).map((function(e){return e.field}))}),[t]),j=function(e,t){b(Object(P.a)(Object(P.a)({},u),{},Object(Oe.a)({},e,t)))};return Object(ae.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a(u,c)},children:[Object(ae.jsx)(B.a,{children:void 0!==n.index?u.name:"\u521b\u5efa\u65b0\u7684\u8f93\u51fa\u9879"}),Object(ae.jsx)(kt.a,{name:"name",label:"\u8f93\u51fa\u9879\u540d\u79f0",variant:"outlined",value:u.name,onChange:function(e){return j("name",e.currentTarget.value)},margin:"normal",disabled:l,fullWidth:!0,required:!0}),Object(ae.jsx)(Ct,{label:"\u8868\u8fbe\u5f0f",value:u.expression,fields:d,onChange:function(e){return j("expression",e)},margin:"normal",fullWidth:!0,required:!0}),Object(ae.jsxs)(ot.a,{margin:"normal",fullWidth:!0,children:[Object(ae.jsx)(ut.a,{id:"demo-simple-select-label",children:"\u8f93\u51fa\u683c\u5f0f"}),Object(ae.jsxs)(zt.a,{label:"\u8f93\u51fa\u683c\u5f0f",value:u.format,onChange:function(e){j("format",e.target.value)},children:[Object(ae.jsx)(qe.a,{value:"number",children:"\u6574\u6570"}),Object(ae.jsx)(qe.a,{value:"currency",children:"\u8d27\u5e01"}),Object(ae.jsx)(qe.a,{value:"percent",children:"\u767e\u5206\u6bd4"}),Object(ae.jsx)(qe.a,{children:Object(ae.jsx)(B.a,{color:"textSecondary",children:Object(ae.jsx)("em",{children:"\u65e0\u683c\u5f0f"})})})]})]}),Object(ae.jsxs)(Je.a,{sx:{display:"flex",justifyContent:"flex-end","& > *":{mr:1}},children:[Object(ae.jsx)(Y.a,{onClick:i,children:"\u53d6\u6d88"}),Object(ae.jsx)(Y.a,{type:"submit",variant:"contained",children:l?"\u786e\u8ba4\u4fee\u6539":"\u521b\u5efa"})]})]})}var Mt=n(498),Dt=n(473);function $t(e){var t=e.title,n=e.action,a=e.children,i=e.input,c=e.showInput,l=r.a.useRef(null);return Object(ae.jsxs)(W.a,{ref:l,sx:{position:"relative",mt:2,borderRadius:1,border:1,boxSizing:"border-box",borderColor:"text.disabled",overflow:"hidden",height:520},children:[Object(ae.jsx)(W.a,{height:"100%",overflow:"auto",children:Object(ae.jsx)(ee.a,{subheader:Object(ae.jsxs)(Mt.a,{component:"div",sx:{bgcolor:"#f0f0f0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(ae.jsx)("span",{children:t}),n]}),children:a})}),Object(ae.jsx)(Dt.a,{direction:"up",in:c,container:l.current,children:Object(ae.jsx)(ze.a,{sx:{position:"absolute",top:0,left:0,bottom:0,right:0,zIndex:10,p:2,overflow:"hidden"},children:i})})]})}var It=function(e){var t=e.value,n=e.onChange,a=t.label,i=void 0===a?"":a,c=t.output,l=void 0===c?[]:c,s=r.a.useState(null),o=Object(N.a)(s,2),u=o[0],b=o[1],d=$((function(e){if(t.datasource)return e.datasource.allDatasources.find((function(e){return e.id===t.datasource}))})),j=r.a.useMemo((function(){return(null===d||void 0===d?void 0:d.meta.schema)||[]}),[d]),h=r.a.useMemo((function(){return j.filter((function(e){return"string"===e.type})).map((function(e){return e.field}))}),[j]);return Object(ae.jsxs)(W.a,{children:[Object(ae.jsx)(Ct,{label:"\u5206\u7ec4\u8868\u8fbe\u5f0f",value:i||"",onChange:function(e){n(Tt()(t,{label:{$set:e}}))},margin:"normal",fields:h,fullWidth:!0,required:!0}),Object(ae.jsx)($t,{title:"\u8f93\u51fa\u9879\u8868\u8fbe\u5f0f",action:Object(ae.jsx)(H.a,{size:"small",onClick:function(){b({output:{name:"",expression:""}})},children:Object(ae.jsx)(ge.a,{})}),input:u&&Object(ae.jsx)(Rt,{value:u,schema:j,onSubmit:function(e,a){if(b(null),void 0===a){var r=t.output?t:Object(P.a)(Object(P.a)({},t),{},{output:[]});n(Tt()(r,{output:{$push:[e]}}))}else n(Tt()(t,{output:Object(Oe.a)({},a,{$set:e})}))},onClose:function(){return b(null)}}),showInput:null!==u,children:l.map((function(e,a){return Object(ae.jsxs)(r.a.Fragment,{children:[Object(ae.jsx)(K.a,{secondaryAction:Object(ae.jsx)(H.a,{edge:"end","aria-label":"delete",size:"small",color:"warning",onClick:function(){return function(e){n(Tt()(t,{output:{$splice:[[e,1]]}}))}(a)},children:Object(ae.jsx)(st.a,{})}),disablePadding:!0,children:Object(ae.jsx)(Q.a,{onClick:function(){return function(e,t){b({index:e,output:t})}(a,e)},children:Object(ae.jsx)(it.a,{primary:e.name,secondary:e.expression})})}),Object(ae.jsx)(Z.a,{component:"li"})]},e.name)}))})]})},Lt=n(235),Et=n.n(Lt),Ft=n(244),Wt=n(247),Bt=n(234),Nt=n.n(Bt);function Pt(e){var t=e.output,n=e.value,a=e.onChange,i=e.onClose,c=function(e){switch(n.type){case"simple":var t=n.series[e];return Object(ae.jsx)(Gt,{series:t,onChange:function(t){a(Tt()(n,{series:Object(Oe.a)({},e,{$set:t})}))}});case"bmap":return Object(ae.jsx)(H.a,{onClick:function(){},children:Object(ae.jsx)(Ae.a,{})});default:return null}};return Object(ae.jsxs)(V.a,{children:[Object(ae.jsxs)(W.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(ae.jsx)(B.a,{children:qt[n.type]}),Object(ae.jsx)(H.a,{onClick:i,children:Object(ae.jsx)(st.a,{})})]}),Object(ae.jsxs)(V.a,{flex:1,overflow:"hidden",children:[Object(ae.jsx)(kt.a,{label:"Title",value:n.title,margin:"dense",size:"small",onChange:function(e){return a(Tt()(n,{title:{$set:e.currentTarget.value}}))}}),"bmap"!==n.type&&Object(ae.jsxs)(ot.a,{margin:"dense",children:[Object(ae.jsx)(ut.a,{id:"chartspec-size",children:"Size"}),Object(ae.jsxs)(zt.a,{label:"Size",labelId:"chartspec-size",value:n.size,size:"small",onChange:function(e){return a(Tt()(n,{size:{$set:e.target.value}}))},children:[Object(ae.jsx)(qe.a,{value:"small",children:"Small"}),Object(ae.jsx)(qe.a,{value:"medium",children:"Medium"}),Object(ae.jsx)(qe.a,{value:"large",children:"Large"})]})]}),Object(ae.jsx)(ee.a,{children:t.map((function(e,t){var i=n.series.findIndex((function(t){return t.name===e.name})),l=i>=0;return Object(ae.jsxs)(r.a.Fragment,{children:[Object(ae.jsx)(K.a,{dense:!0,disablePadding:!0,secondaryAction:i>=0&&c(i),children:Object(ae.jsxs)(Q.a,{onClick:function(){return function(e,t){if(t)a(Tt()(n,{series:{$push:[{name:e.name}]}}));else{var r=n.series.findIndex((function(t){return t.name===e.name}));a(Tt()(n,{series:{$splice:[[r,1]]}}))}}(e,!l)},children:[Object(ae.jsx)(Ft.a,{children:Object(ae.jsx)(Wt.a,{edge:"start",checked:l,tabIndex:-1,disableRipple:!0})}),Object(ae.jsx)(it.a,{primary:e.name})]})}),Object(ae.jsx)(Z.a,{component:"li"})]},e.name)}))})]})]})}var At=function(e){var t=e.checked,n=e.children,a=e.onClick;return t?Object(ae.jsxs)(qe.a,{onClick:a,children:[Object(ae.jsx)(Ft.a,{children:Object(ae.jsx)(Nt.a,{})}),n]}):Object(ae.jsx)(qe.a,{children:Object(ae.jsx)(it.a,{onClick:a,inset:!0,children:n})})},Gt=function(e){var t=e.series,n=e.onChange,a=r.a.useState(null),i=Object(N.a)(a,2),c=i[0],l=i[1];return t?Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(H.a,{onClick:function(e){l(e.currentTarget)},children:Object(ae.jsx)(Ae.a,{})}),Object(ae.jsx)(Ge.a,{open:Boolean(c),anchorEl:c,onClose:function(){return l(null)},children:["line","bar","scatter"].map((function(e){return Object(ae.jsx)(At,{checked:t.type===e,onClick:function(){return function(e){n(Object(P.a)(Object(P.a)({},t),{},{type:e})),l(null)}(e)},children:e},e)}))})]}):null},qt={simple:"\u57fa\u672c\u56fe\u8868",radar:"\u96f7\u8fbe\u56fe",bmap:"\u5730\u56fe"},Ht=function(e){return{type:"radar",title:"\u96f7\u8fbe\u56fe",size:"medium",showLegend:!0,category:"label",series:e.map((function(e){return{name:e.name}}))}},Jt=function(e){return{type:"bmap",title:"\u5168\u56fd\u57ce\u5e02\u5730\u56fe",showLegend:!1,category:"city",series:e.map((function(e){return{name:e.name,showLabel:!0,size:"scaled"}}))}};function Ut(e){var t=e.value,n=e.onChange,a=r.a.useState(null),i=Object(N.a)(a,2),c=i[0],l=i[1],s=r.a.useState(null),o=Object(N.a)(s,2),u=o[0],b=o[1],d=null!==u&&t.charts?t.charts[u]:null;return Object(ae.jsx)($t,{title:"\u56fe\u8868\u7ec4\u4ef6",action:Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(H.a,{size:"small",onClick:function(e){return l(e.currentTarget)},children:Object(ae.jsx)(ge.a,{})}),Object(ae.jsx)(Ge.a,{open:Boolean(c),anchorEl:c,onClose:function(){return l(null)},children:Object.entries(qt).map((function(e){var a=Object(N.a)(e,2),r=a[0],i=a[1];return Object(ae.jsx)(qe.a,{onClick:function(){return function(e){l(null);var a=function(t){switch(t.charts||(t=Object(P.a)(Object(P.a)({},t),{},{charts:[]})),e){case"simple":return Tt()(t,{charts:{$push:[(n=t.output,{type:"simple",title:"\u57fa\u672c\u56fe\u8868",size:"medium",showLegend:!0,category:"label",series:n.map((function(e){return{name:e.name,type:"bar"}}))})]}});case"radar":return Tt()(t,{charts:{$push:[Ht(t.output)]}});case"bmap":return Tt()(t,{charts:{$push:[Jt(t.output)]}})}var n}(t);b(a.charts.length-1),l(null),n(a)}(r)},children:i},r)}))})]}),input:d&&Object(ae.jsx)(Pt,{value:d,output:t.output,onChange:function(e){n(Tt()(t,{charts:Object(Oe.a)({},u,{$set:e})}))},onClose:function(){return b(null)}}),showInput:null!==u,children:(t.charts||[]).map((function(e,a){return Object(ae.jsxs)(r.a.Fragment,{children:[Object(ae.jsx)(K.a,{secondaryAction:Object(ae.jsx)(H.a,{edge:"end","aria-label":"delete",size:"small",onClick:function(){return e=a,void n(Tt()(t,{charts:{$splice:[[e,1]]}}));var e},children:Object(ae.jsx)(Et.a,{})}),disablePadding:!0,children:Object(ae.jsx)(Q.a,{onClick:function(){return b(a)},children:Object(ae.jsx)(it.a,{primary:e.title,secondary:qt[e.type]})})}),Object(ae.jsx)(Z.a,{component:"li"})]},a)}))})}function _t(e){var t=e.widget,n=e.onChange,a=r.a.useState(0),i=Object(N.a)(a,2),c=i[0],l=i[1],s=$((function(e){return e.datasource.allDatasources}));return Object(ae.jsxs)(tt.a,{activeStep:c,orientation:"vertical",children:[Object(ae.jsxs)(nt.a,{children:[Object(ae.jsx)(at.a,{children:"\u9009\u62e9\u6570\u636e\u96c6"}),Object(ae.jsxs)(rt.a,{children:[Object(ae.jsx)(ct,{datasources:s,value:t.datasource,onChange:function(e){var a=t.id,r=t.title;n({id:a,title:r,datasource:e})}}),Object(ae.jsx)(W.a,{children:Object(ae.jsx)(Y.a,{onClick:function(){return l(1)},children:"\u4e0b\u4e00\u6b65"})})]})]}),Object(ae.jsxs)(nt.a,{children:[Object(ae.jsx)(at.a,{children:"\u914d\u7f6e\u6570\u636e\u8f6c\u6362\u65b9\u6848"}),Object(ae.jsxs)(rt.a,{children:[Object(ae.jsx)(It,{value:t,onChange:n}),Object(ae.jsxs)(W.a,{children:[Object(ae.jsx)(Y.a,{onClick:function(){return l(0)},children:"\u8fd4\u56de"}),Object(ae.jsx)(Y.a,{onClick:function(){return l(2)},children:"\u4e0b\u4e00\u6b65"})]})]})]}),Object(ae.jsxs)(nt.a,{children:[Object(ae.jsx)(at.a,{children:"Dashboard\u7ec4\u4ef6"}),Object(ae.jsxs)(rt.a,{children:[Object(ae.jsx)(Ut,{value:t,onChange:n}),Object(ae.jsxs)(W.a,{children:[Object(ae.jsx)(Y.a,{onClick:function(){return l(1)},children:"\u8fd4\u56de"}),Object(ae.jsx)(Y.a,{onClick:function(){return l(2)},children:"\u786e\u5b9a"})]})]})]})]})}var Kt=["open","onClose"],Qt=400,Vt=function(e){var t=e.open,n=e.onClose,a=Object(be.a)(e,Kt);return Object(ae.jsxs)(J.a,{sx:{width:Qt,flexShrink:0,"& .MuiDrawer-paper":{width:Qt}},variant:"persistent",anchor:"right",open:t,children:[Object(ae.jsxs)(q.a,{sx:{display:"flex",alignItems:"center",py:1,justifyContent:"flex-start"},children:[Object(ae.jsx)(H.a,{onClick:n,children:Object(ae.jsx)(et.a,{})}),Object(ae.jsx)(B.a,{variant:"h6",children:" Design "})]}),Object(ae.jsx)(Z.a,{}),Object(ae.jsx)(W.a,{p:2,children:Object(ae.jsx)(_t,Object(P.a)({},a))})]})},Xt=n(105),Yt=Object(A.a)(ze.a)((function(e){e.theme;return{display:"flex",height:300,"& .MuiDataGrid-footerContainer":{backgroundColor:"#f0f0f0"}}}));function Zt(e){var t=e.datasource,n=t.meta.schema,a=t.data,i=r.a.useMemo((function(){return{rows:a.map((function(e,t){return e.reduce((function(e,t,a){return Object(P.a)(Object(P.a)({},e),{},Object(Oe.a)({},n[a].field,t))}),{id:String(t)})})),columns:n.map((function(e){return{field:e.field}}))}}),[a,n]),c=i.rows,l=i.columns;return Object(ae.jsxs)(W.a,{component:"section",my:2,children:[Object(ae.jsx)(B.a,{variant:"h6",gutterBottom:!0,children:"\u6570\u636e\u96c6"}),Object(ae.jsx)(Yt,{children:Object(ae.jsx)(Xt.a,{rows:c,columns:l,localeText:Xt.b.components.MuiDataGrid.defaultProps.localeText})})]})}function en(e){var t=e.groupResult,n=e.widget,a=r.a.useMemo((function(){return{rows:Object.entries(t).map((function(e,t){var n=Object(N.a)(e,2),a=n[0],r=n[1];return Object(P.a)({id:t,label:a},r)})),columns:n.output.reduce((function(e,t){return[].concat(Object(j.a)(e),[{field:t.name,width:150}])}),[{field:"label",headerName:n.label,width:150}])}}),[n,t]),i=a.rows,c=a.columns;return Object(ae.jsxs)(W.a,{component:"section",my:2,children:[Object(ae.jsx)(B.a,{variant:"h6",gutterBottom:!0,children:"\u8f93\u51fa\u7ed3\u679c"}),Object(ae.jsx)(Yt,{children:Object(ae.jsx)(Xt.a,{rows:i,columns:c,localeText:Xt.b.components.MuiDataGrid.defaultProps.localeText})})]})}function tn(e){var t=e.charts,n=e.groupResult;return Object(ae.jsxs)(W.a,{component:"section",my:2,children:[Object(ae.jsx)(B.a,{variant:"h6",gutterBottom:!0,children:"\u56fe\u8868\u7ec4\u4ef6"}),Object(ae.jsx)(he.a,{container:!0,spacing:2,children:t.map((function(e,t){return Object(ae.jsx)(Ne,{spec:e,groupResult:n},t)}))})]})}function nn(e){var t=e.widget,n=t.datasource,a=$((function(e){if(n)return e.datasource.allDatasources.find((function(e){return e.id===n}))})),i=r.a.useMemo((function(){if(a&&t.label&&a.meta.schema.findIndex((function(e){return"$".concat(e.field)===t.label.trim()}))>=0&&t.output&&t.output.length>0)try{return Se(a,t.label,t.output)}catch(e){console.error(e)}}),[a,t]),c=t.charts&&t.charts.length>0?t.charts:null;return Object(ae.jsxs)("article",{children:[a&&Object(ae.jsx)(Zt,{datasource:a}),i&&Object(ae.jsx)(en,{widget:t,groupResult:i}),i&&c&&Object(ae.jsx)(tn,{groupResult:i,charts:c})]})}function an(){var e=r.a.useState(!0),t=Object(N.a)(e,2),n=t[0],a=t[1],i=r.a.useState({charts:[]}),c=Object(N.a)(i,2),l=c[0],s=c[1];return Object(ae.jsxs)(oe,{title:"New Widget",rightDrawerWidth:Qt,rightDrawerOpen:n,actions:!n&&Object(ae.jsx)(H.a,{color:"inherit",onClick:function(){return a(!0)},children:Object(ae.jsx)(Qe.a,{})}),children:[Object(ae.jsx)(Ye,{drawerWidth:Qt,open:n,children:Object(ae.jsxs)(F.a,{component:"article",children:[Object(ae.jsx)(q.a,{}),Object(ae.jsxs)(_e.a,{"aria-label":"breadcrumb",children:[Object(ae.jsx)(Xe,{underline:"hover",color:"inherit",to:"/narvi/dashboard",children:"Dashboard"}),Object(ae.jsx)(B.a,{color:"text.primary",children:"New Widget"})]}),Object(ae.jsx)(nn,{widget:l})]})}),Object(ae.jsx)(Vt,{widget:l,onChange:function(e){return s(e)},open:n,onClose:function(){return a(!1)}})]})}function rn(){var e=r.a.useState(!0),t=Object(N.a)(e,2),n=t[0],a=t[1],i=Object(s.i)().id,c=$((function(e){return e.dashboard.widgets.find((function(e){return e.id===i}))})),l=r.a.useState(c||{}),o=Object(N.a)(l,2),u=o[0],b=o[1];return c?Object(ae.jsxs)(oe,{title:u.title,rightDrawerWidth:Qt,rightDrawerOpen:n,actions:!n&&Object(ae.jsx)(H.a,{color:"inherit",onClick:function(){return a(!0)},children:Object(ae.jsx)(Qe.a,{})}),children:[Object(ae.jsx)(Ye,{drawerWidth:Qt,open:n,children:Object(ae.jsxs)(F.a,{component:"article",children:[Object(ae.jsx)(q.a,{}),Object(ae.jsxs)(_e.a,{"aria-label":"breadcrumb",children:[Object(ae.jsx)(Xe,{underline:"hover",color:"inherit",to:"/narvi/dashboard",children:"Dashboard"}),Object(ae.jsx)(B.a,{color:"text.primary",children:u.title})]}),Object(ae.jsx)(nn,{widget:u})]})}),Object(ae.jsx)(Vt,{widget:u,onChange:b,open:n,onClose:function(){return a(!1)}})]}):Object(ae.jsx)(s.a,{to:"/404",replace:!0})}var cn=function(){return Object(ae.jsx)(W.a,{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",children:Object(ae.jsx)(B.a,{variant:"h2",children:"OOPS... page not found!"})})},ln=function(){return $((function(e){return e.auth})).loaded?Object(ae.jsxs)(s.d,{children:[Object(ae.jsx)(s.b,{path:"/narvi",element:Object(ae.jsx)(je,{})}),Object(ae.jsx)(s.b,{path:"/narvi/404",element:Object(ae.jsx)(cn,{})}),Object(ae.jsxs)(s.b,{path:"/narvi/dashboard",children:[Object(ae.jsx)(s.b,{index:!0,element:Object(ae.jsx)(Ue,{})}),Object(ae.jsx)(s.b,{path:"new",element:Object(ae.jsx)(an,{})}),Object(ae.jsx)(s.b,{path:":id",element:Object(ae.jsx)(rn,{})})]})]}):null};function sn(){return r.a.useEffect((function(){!function(e){var t={id:"sales",title:"2021\u8f66\u578b\u9500\u91cf",datasource:C.id,label:"$\u8f66\u578b",output:[{name:"\u8ba2\u5355\u91cf",expression:"sum($\u8ba2\u5355\u6570\u91cf)"},{name:"\u9500\u91cf",expression:"sum($\u4ea4\u4ed8\u6570\u91cf)"},{name:"\u8ba2\u5355\u5b8c\u6210\u7387",expression:"sum($\u4ea4\u4ed8\u6570\u91cf)/sum($\u8ba2\u5355\u6570\u91cf)"},{name:"\u7ebf\u4e0a\u8f6c\u6362\u7387",expression:"sum($\u5230\u5e97\u8bbf\u5ba2\u6570)/sum($\u7ebf\u4e0a\u8be2\u95ee\u6b21\u6570)"},{name:"\u8d2d\u4e70\u51b3\u7b56\u8f6c\u6362\u7387",expression:"sum($\u8ba2\u5355\u6570\u91cf)/sum($\u5230\u5e97\u8bbf\u5ba2\u6570)"}],charts:[{type:"simple",title:"\u9500\u91cf\u56fe\u8868",size:"medium",category:"\u8f66\u578b",series:[{name:"\u9500\u91cf",type:"bar"},{name:"\u8ba2\u5355\u91cf",type:"line"}]},{type:"radar",title:"\u5b8c\u6210\u7387\u6307\u6807",size:"medium",category:"\u8f66\u578b",series:[{name:"\u8ba2\u5355\u5b8c\u6210\u7387"},{name:"\u8ba2\u5355\u91cf"},{name:"\u9500\u91cf"},{name:"\u7ebf\u4e0a\u8f6c\u6362\u7387"},{name:"\u8d2d\u4e70\u51b3\u7b56\u8f6c\u6362\u7387"}]}]},n={id:"salesByCity",title:"\u533a\u57df\u9500\u91cf",datasource:C.id,label:"$\u57ce\u5e02",output:[{name:"\u9500\u91cf",expression:"sum($\u4ea4\u4ed8\u6570\u91cf)"}],charts:[{type:"bmap",title:"\u57ce\u5e02\u9500\u91cf",category:"city",series:[{name:"\u9500\u91cf",size:"scaled",showLabel:!0}]}]};e.dispatch(T({datasources:[C,y,S],widgets:[t,n],userInfo:{displayName:"\u7ae0\u53c1",email:"user@example.com"}}))}(D)}),[]),Object(ae.jsx)(l.a,{store:D,children:Object(ae.jsxs)(o.a,{children:[Object(ae.jsx)(u.a,{}),Object(ae.jsx)(b.a,{theme:E,children:Object(ae.jsx)(ln,{})})]})})}var on=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,500)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};c.a.render(Object(ae.jsx)(r.a.StrictMode,{children:Object(ae.jsx)(sn,{})}),document.getElementById("root")),on()}},[[404,1,2]]]);
//# sourceMappingURL=main.d7bd11ee.chunk.js.map